{"version":3,"sources":["../../src/utils/index.ts","../../src/types.ts","../../src/moment-types/moment-subset.ts","../../src/calendar-context.tsx","../../src/overrides/general.ts","../../src/overrides/index.ts","../../src/Toolbar.tsx","../../src/Weekdays.tsx","../../src/AvailSlot.tsx","../../src/AvailSlots.tsx","../../src/DayCell.tsx","../../src/DayCells.tsx","../../src/MonthlyAvailabilityCalendar.tsx","../../src/AvailabilityCalendar.tsx","App.tsx","serviceWorker.ts","index.tsx"],"names":["createUtils","moment","interval","msOffset","Math","rotated","ms","shifted","ranges","r","rotateMs","range","i","foldedRangeIndex","foldedRange","filtered","a","b","localDate","Date","localDateInProviderTz","timeZone","providerTimeZone","d1","d2","res","periodStartRoundedToDayMs","localStart","periodEndRoundedToDayMs","localEnd","rotateRangesByms","blockOutPeriods","calcOffsetFromProviderTimeZoneMs","period","startDate","endDate","msInHour","datesEqual","formatAsMonth","sameMonth","formatAsDateWithTime","formatAsDateJustTime","formatAsDate","shouldHideWeek","selectedDate","week","viewingDayAvailabilities","availByIndex","days","d","hasAvail","avails","addBlockOutBookings","availabilitiesFromBookings","periodStartMs","now","roundToHour","periodStartArg","periodStart","periodEnd","booking","lastAvailability","bookingStartMs","bookingEndMs","saveEndDate","toStartAndEnd","monthRangeForDate","start","end","monthDaysForDate","startOfMonth","endOfMonth","startOfWeek","numDays","endOfWeek","weeks","numWeeks","w","j","chunkify","endMs","msRounded","chunk","intervalLengthMs","defaultTheme","dayClassBase","dayClassSelected","dayClassHasAvailability","dayClassDefault","slotsContainerStyleShow","transition","transform","slotsContainerStyleHide","slotContainerCloseClass","slotButtonClass","toolBarStyle","flexWrap","width","minHeight","toolBarButtonsContainerClass","toolBarButtonClass","toolBarLabelClass","requestAppointmentLabel","momentSubsetStub","format","Error","startOf","endOf","add","diff","toDate","CalendarContext","React","utils","theme","useCalendarContext","useContext","CalendarContextProvider","children","useMemo","value","resolveStyle","style","styleProps","resolveClassName","className","getOverride","o","defaultSpec","_t","_u","_k","Root","internalProps","defaultComponents","ToolBar","ToolBarButton","Weekdays","Weekday","DayCells","DayCell","Availabilities","AvailSlot","navigate","Toolbar","messages","localizer","label","onNavigate","overrides","getToolBarOverride","role","onClick","message","today","previous","next","disabled","ToolbarButton","getToolBarButtonOverride","onClicked","weekdays","getWeekdaysOverride","display","justifyContent","flexDirection","getWeekdayOverride","height","marginBottom","alignItems","RootWeekday","classNameWeekday","styleWeekday","weekday","key","onAvailabilitySelected","s","getAvailOverride","minWidth","date","AvailSlots","handleUnselect","show","slotStepMs","slotLengthMs","getAvailsOverride","type","outline","durationMinutes","AddBookingFromAvailabilitySlots","slots","shouldDisplay","dayIndexInWeek","weekIndexInCalRange","availsByIndex","handleSelected","dayIndexInCalRange","isSelected","getDayCellOverride","cursor","border","styleWithHiden","visibility","getDayCellsOverride","MonthlyAvailabilityCalendar","availabilities","onDaySelected","useState","setSelectedDate","useEffect","AvailabilityCalendarComp","initialDate","bookings","onCalRangeChange","calRange","setCalRange","setDate","lastCalRange","useRef","startAndEnd","newDate","AvailabilityCalendar","props","CalModeToolbar","calMode","setCalMode","calModeTarget","CalModeButton","calModeBtnStyle","styleShow","position","styleHide","calModeSelected","blockOutAllDay","blockOutMorning","blockOutNoon","blockOutEvening","App","selectedAvails","setSelectedAvails","showCustomToolBar","setShowCustomToolBar","timeOfDayMode","setTimeOfDayMode","lastSelectedDay","setLastSelectedDay","calVersion","setCalVersion","blockOutsForCalMode","undefined","p","getTime","borderWidth","borderStyle","borderBottomWidth","borderRightWidth","borderColor","additionalClassForWasSelected","href","maxWidth","maxHeight","overflowY","console","log","startMs","wasSelected","day","backgroundColor","top","left","version","float","paddingRight","Boolean","window","location","hostname","match","ReactDOM","render","document","getElementById","navigator","serviceWorker","ready","then","registration","unregister"],"mappings":"2eAQgBA,EAAYC,GAC1B,cACE,OAAOC,oBAA6BA,YAApC,UAsCF,gBACEC,EACEA,IAAeC,SALH,MAKZD,GAA6CC,UALjC,MAIdD,GAGA,IAAME,GADNC,EAAKF,SANS,MAMSA,WAAvBE,KACA,EACA,OAAOD,IAAcA,EARP,MAQd,EAGF,gBAEE,IAAME,EAAUC,EAAA,KAAW,SAAAC,GAAC,MAAI,CAC9BC,EAASD,EAAD,GAARC,GAdY,MAeZA,EAASD,EAAD,GAARC,GAfY,UAsBd,EAH2BH,EAAA,KACpB,qBAAeI,KAAWA,EAAXA,MAAf,KADoB,QAEjB,SAAAC,GAAC,OAAIA,GAAJ,KACX,wDAAmD,yFAAxCC,EAAwC,EAC3CC,EAAcP,EAApB,GACAA,KAA4B,KAFqB,GAGjDA,OAAa,CAACO,EAAD,GAzBD,QA0BZP,OAAa,CAAC,EAAGO,EAJgC,KAOnD,IAAMC,EAAWR,EAAA,QAAe,SAAAE,GAAC,OAAIA,MAAJ,KAIjC,OAFAM,QAAc,qBAAUC,KAAOC,EAAjB,MAEd,EAGF,gBAIE,MAAuB,OAAO,EAE9B,IAAMC,EAAY,IAAIC,KAAtB,GAEIC,EAAwB,IAAID,KAC9BD,EAAA,uBAAkC,CAChCG,SAAUC,KAQd,OArDe,KAiDblB,YACGgB,YAAkCF,EAAnC,WAlDW,KAiDbd,IAyDJ,gBACE,OACEmB,MAEAA,kBAAqBC,EAFrBD,eAGAA,eAAkBC,EAHlBD,YAIAA,cAAiBC,EALnB,UA8CF,sBAmBE,IAZA,IAAMC,EAAM,GAAH,OAAT,GACMC,EAA4B,IAAIP,KACpCQ,EADgC,cAEhCA,EAFgC,WAGhCA,EAHgC,WAAlC,UAKMC,EAA0B,IAAIT,KAClCU,EAD8B,cAE9BA,EAF8B,WAG9BA,EAH8B,WAAhC,UAOMjB,EADN,EAEEA,GAFF,EAGEA,GAhLY,MAiLZ,CACA,IAEA,EAD0BkB,EAAiBC,EADxBC,EAAiCpB,EAApD,IAEA,wDAAwC,yFAA7BqB,EAA6B,EACtCR,OAAS,CACPS,UAAW,IAAIf,KAAKP,EAAIqB,EADjB,IAEPE,QAAS,IAAIhB,KAAKP,EAAIqB,EAAb,MAKbR,OAAS,CACPS,UAAW,IAAIf,KAAKP,EA7LV,MA4LH,GAEPuB,QAAS,IAAIhB,KAAKP,EA9LR,SAiMd,SA6FF,MAAO,CACLwB,SA9Re,KA+RfC,WAFK,EAGLC,cAtNF,YACE,OAAOrC,YAAP,aAsNAsC,UAlMF,cACE,OAAOF,EACLpC,sBADe,SAIfA,sBAJF,WAkMAuC,qBAhOF,YACE,OAAOvC,YAAP,sBAgOAwC,qBA7NF,YACE,OAAOxC,YAAP,UA6NAyC,aAtOF,YACE,OAAOzC,YAAP,qBAsOA0C,eAxJF,gBAKE,OACEC,IA/DJ,EAgEcA,EAhEd,EAgE4BC,EADxBD,IA9DKP,EACLpC,qBADe,SAIfA,qBAJF,YAgEE6C,SAHF,EA9DF,SAkNEC,aAxNF,cACE,OAAQC,GAAD,SAAiB,SAAAC,GAAC,MAAK,CAC5BC,SAAUC,EAAA,MAAY,SAAAnC,GAAC,OAAIqB,EAAWrB,EAAD,UAAd,WAuNzBoC,oBAVK,EAWLC,2BArGF,sBAQE,IAjJF,EAiJQC,EAAgBlD,UAjJxB,EAkJgBmD,EAAZC,UA5Ma,KA2DRpD,WAAWE,EA3DH,MAwDE,MAqJfmD,EAFF,WAIMC,EAAc,IAAIvC,KAAxB,GACA,GAAIwC,aAAuBD,EAA3B,UACE,SAEF,IAWMjC,EAA2B,CAC/B,CACES,UADF,EAEEC,QAASwB,IAGb,EAjBsBP,EAAoB,EAAD,MAAzC,GAOe,MACb,qBAAUpC,sBAAwBC,YAAlC,aASF,wDAA8B,yFAAnB2C,EAAmB,EACtBC,EAAmBpC,EAAIA,SAA7B,GACMqC,EAAiBF,YAAvB,UACMG,EAAeH,UAArB,UACA,GACGA,EAAD,WACCA,EADD,WAEAE,GAHF,GAOA,GAAIA,EAAiBD,YAArB,UAEEA,YAA6B,IAAI1C,KAC/Bf,SAASyD,YAATzD,UADFyD,SAGK,GAAIC,EAAiBD,UAArB,UAAyD,CAC9D,IAAMG,EAAcH,EAD0C,QAG9DA,UAA2B,IAAI1C,KAA/B0C,GACIE,EAAeC,EAAnB,WAEEvC,OAAS,CAAES,UAAW,IAAIf,KAAjB,GAAqCgB,QAAS6B,KAI7D,UA2CAC,cAxCF,YACE,IAAMxC,EAAM,CACVS,UACGvB,SAEYA,EAJL,GAKVwB,QACGxB,OAEUA,EAAkBA,SAAF,IAK/B,OAHIc,wBAA4BA,UAAhC,YACEA,UAAc,IAAIN,KAAKM,oBA9QX,QAgRd,GA2BAyC,kBAxBF,YACE,MAAO,CACLC,MAAOlE,sBADF,SAILmE,IAAKnE,+BAoBPoE,iBAvLF,YAYE,IAXA,IAAMC,EAAerE,aAArB,SACMsE,EAAatE,WAAnB,SACMuE,EAAcF,UAApB,QAEMG,EADYF,QAAlB,QACgBG,eAAhB,EAEMC,EAAN,GACM3B,EAAN,GACMC,EAAN,EAEM2B,EAAWxE,WAAWqE,EAA5B,GACS7D,EAAT,EAAgBA,EAAhB,MAAmC,CACjC,IAAMiE,EAAN,GACAF,UACA,IAAK,IAAIG,EAAT,EAAgBA,EAAhB,MACED,OAAO5B,EAAP4B,UACA7B,OAAUC,EAAVD,UACAC,eAIJ,MAAO,CAAE0B,MAAF,EAAS3B,SAkKhB+B,SA7UF,gBAOE,IAAMtD,EAAN,GACA,4DAAkC,qFAEhC,IAFgC,IAAvBvB,EAAuB,EAC1B8E,EAAQ9E,UAAd,UACSI,EAAKJ,YAAd,UAA4CI,EAA5C,EAAwDA,GAAxD,EAAyE,CAEvE,IAAM2E,EAAN,EACMC,EAAQ,CACZhD,UAAW,IAAIf,KADH,GAEZgB,QAAS,IAAIhB,KAAKf,WAAgB6E,EAAzB,KAEPE,MAAJ,GACE1D,WAWN,W,ICAS2D,EAA8B,CACzCC,aADyC,iBAEzCC,iBAFyC,iBAGzCC,wBAHyC,cAIzCC,gBAJyC,wBAMzCC,wBAAyB,CACvBC,WADuB,kBAEvBC,UAAW,YAEbC,wBAAyB,CACvBF,WADuB,kBAEvBC,UAAW,YAEbE,wBAdyC,QAezCC,gBAfyC,kBAiBzCC,aAAc,CACZC,SADY,SAEZC,MAFY,OAGZC,UAAW,IAEbC,6BAtByC,yBAuBzCC,mBAvByC,MAwBzCC,kBAxByC,eA0BzCC,wBAAyB,uBCyMdC,EAAiC,CAC5CC,OAAQ,YACN,MAAM,IAAIC,MAAV,oBAGFC,QAAS,YACP,MAAM,IAAID,MAAV,oBAEFE,MAAO,YACL,MAAM,IAAIF,MAAV,oBAGFG,IAAK,cACH,MAAM,IAAIH,MAAV,oBAGFI,KAAM,gBACJ,MAAM,IAAIJ,MAAV,oBAGFK,OAAQ,WACN,MAAM,IAAIL,MAAV,qBCvRSM,EAAkBC,kBAA0C,CACvE/G,OAAQ,qBACRgH,MAAOjH,GAAY,uBACnBkH,MAAO9B,IAGI+B,EAAqB,kBAAMC,qBAAN,IAErBC,EAA0B,SAAC,G,IAAEpH,WAAQiH,UAAOI,aACjDL,EAAQM,mBAAQ,kBAAMvH,EAAN,KAA2B,CAAjD,IAEA,OACE,kBAAC+G,EAAD,UACES,MAAO,CACLvH,OADK,EAELgH,MAFK,EAGLC,UALN,ICMF,SAASO,EAAT,KAIE,0BAAWC,EACWA,EAAbC,GAAP,IAEF,EAGF,SAASC,EAAT,KAIE,0BAAWC,EACWA,EAAbF,GAAP,IAEF,EAGF,SAAgBG,EAMdC,EACAC,EACAL,EACAM,EACAC,EACAC,GAEA,gBAAIJ,EACK,CACLK,KAAMJ,EADD,KAELH,UAAWD,EAAiBI,EAAD,UAFtB,GAGLN,MAAO,EAAF,GAAOD,EAAaO,EAAD,MAHnB,IAILK,cAAeL,EAAYK,eAIxB,CACLD,KAAML,QAAUC,EADX,KAELH,UACED,EAAiBG,EAAD,UAAhBH,IACAA,EAAiBI,EAAD,UAJb,GAKLN,MAAO,EAAF,GACAD,EAAaO,EAAD,MADZ,MAEAP,EAAaM,EAAD,MAPZ,IASLM,cAAe,EAAF,GAAOL,EAAP,iBAAqCD,EAArC,gBCjEjB,IAmDaO,EAAoB,CAC/BC,QApDF,GAqDEC,cAnDF,GAoDEC,SA9CF,GA+CEC,QA9CF,GA+CEC,SAzCF,GA0CEC,QAxCF,GAyCEC,eAnCF,GAoCEC,UA9BF,IClCA,IAAMC,EAAqB,OAArBA,EAAqB,OAArBA,EAAqB,QAOdC,EAAU,SAAC,G,IACTC,IAAbC,UAAaD,SACbE,UACAC,eACAC,cAEQnC,EAAUC,IAAVD,M,EDsIV,SACEmC,EACArB,GAGA,OAAOF,EADGuB,EAAYA,EAAH,aAAnB,EACsBrB,EAAtB,ICzImCsB,CAAmBD,EAAW,CAC/D3B,MAAOR,EADwD,aAE/DW,UAAWX,EAAMf,+BAFXiC,SAAMV,UAAOG,cAKrB,SACS,qCAAU,CAAEqB,UAAW,CAAED,YAAYE,MAA3B,EAAkCC,gBAInD,yBAAK1B,MAAOA,EAAOG,UAAWA,EAAW0B,KAAK,SAC5C,qBACErC,MAAOA,EACPmC,UAAWA,EACXG,QAAS,kBAAMJ,EAAWL,IAC1BU,QAASR,EAASS,QAGpB,qBACExC,MAAOA,EACPmC,UAAWA,EACXG,QAAS,kBAAMJ,EAAWL,IAC1BU,QAASR,EAASU,WAGpB,qBACEzC,MAAOA,EACPmC,UAAWA,EACXG,QAAS,kBAAMJ,EAAWL,IAC1BU,QAASR,EAASW,OAGpB,4BACEC,UAAQ,EACRhC,UAAWX,EAAMb,kBACjBqB,MAAO,CAAEzB,MAAO,MAEhBe,8BA5BN,MAkCF,SAAS8C,EAAc,G,IACrBL,YACAD,Y,ED+FF,SACEH,EACArB,GAGA,OAAOF,EADGuB,EAAYA,EAAH,mBAAnB,EACsBrB,EAAtB,IC9FkD+B,CALlDV,YAOE,CACExB,UAPJX,QAOqBd,qBAHbgC,SAAMV,UAAOW,kBAAeR,cAOpC,gBAAIO,EACK,qBAAMqB,QAASA,EAASO,UAAWR,IAI1CxC,0CACEa,UAAWA,EACX2B,QAASA,EACT9B,MAAOA,GAHTV,GADF,GC/EF,IAAMiD,EAAW,CAAC,IAAK,IAAK,IAAK,IAAK,KAAM,IAA5C,MAEaxB,EAAW,SAAC,G,IAAEY,c,EFmK3B,SACEA,EACArB,GAGA,OAAOF,EADGuB,EAAYA,EAAH,cAAnB,EACsBrB,EAAtB,IEvKwBkC,CAAoBb,EAAW,CACrD3B,MAAO,CACLyC,QADK,OAELC,eAFK,aAGLpE,SAHK,SAILqE,cAAe,SALXjC,SAAMV,UASd,KACE,OAAOV,oBAAP,M,MFgKJ,SACEqC,EACArB,GAGA,OAAOF,EADGuB,EAAYA,EAAH,aAAnB,EACsBrB,EAAtB,IE9JIsC,CAAmBjB,EAAW,CAChCxB,UADgC,wBAEhCH,MAAO,CACLzB,MADK,GAELsE,OAFK,GAGLC,aAHK,GAILL,QAJK,OAKLC,eALK,SAMLK,WAAY,YAXRC,IAANtC,KACWuC,IAAX9C,UACO+C,IAAPlD,MAaF,OACE,yBAAKA,MAAOA,GACTuC,EAAA,KAAa,SAAAY,GAAO,OACnBH,EACE,qBAAaG,QAASA,IAEtB,yBAAKhD,UAAW8C,EAAkBG,IAAKD,EAASnD,MAAOkD,GAJtC,Q,SCrCX9B,K,IACd5B,UACA6D,2BACAC,MACAvI,yB,EH6MF,SACE4G,EACArB,EACAL,GAGA,OAAOG,EADGuB,EAAYA,EAAH,eAAnB,EACsBrB,EAAtB,GGhNmCiD,CAFnC5B,YAIE,CACExB,UAAWX,EADb,gBAEEQ,MAAO,CAAEwD,SAAU,MAErB,CAAEC,KAAMH,EAAE9I,YANJkG,SAAMP,cAAWH,UASzB,SAEI,qCACM,CACFR,MADE,EAEF6D,uBAFE,EAGFC,EAHE,EAIFvI,0BAON,yBAAKiF,MAAO,CAAE8C,aAAc,KAC1B,4BACE3C,UAAWA,EACXgC,UAAU,EAEVnC,MAAOA,EACP8B,QAAS,kBACPuB,EAAuB,CACrB7I,UAAW,IAAIf,KAAK6J,EADC,WAErB7I,QAAS,IAAIhB,KAAK6J,EAAT,aAIZvI,EAAqB,IAAItB,KAAK6J,EAdrC,c,ICtBWI,EAER,SAAC,G,IACJtI,6BACAuI,mBACAN,2BACAO,SACAC,eACAC,iBACAvE,UACAC,UACAmC,c,EJuLF,SACEA,EACArB,GAGA,OAAOF,EADGuB,EAAYA,EAAH,oBAAnB,EACsBrB,EAAtB,II1LwByD,CAAkBpC,EAAW,CACnD3B,MAAO4D,EAAOpE,EAAH,wBAAmCA,EAAMtB,0BAD9CwC,SAAMV,UAId,SAEI,qCACM,CACF5E,yBADE,EAEFuI,eAFE,EAGFN,uBAHE,EAIFO,KAJE,EAKFC,WALE,EAMFC,aANE,EAOFvE,MAPE,EAQFC,WAON,yBAAKQ,MAAOA,GACT4D,GACC,yBAAKzD,UAAU,aACb,4BACE6D,KAAK,SACL7D,UAAWX,EAAMrB,wB,aACN,QACX6B,MAAO,CAAEiE,QAAS,QAClBnC,QAAS6B,GAET,0B,cAAkB,QARtB,SAUE,qBACEnE,MAAOA,EACP0E,gBAAiB,GACjBzI,OAAQL,EACRiI,uBAAwBA,EACxBS,aAAcA,EACdD,WAAYA,EACZtE,MAAOA,EACPoC,UAAWA,IAEZvG,YACC,4BACE4I,KAAK,SACL7D,UAAWX,EAAMrB,wB,aACN,QACX6B,MAAO,CAAEiE,QAAS,QAClBnC,QAAS6B,GAET,0B,cAAkB,QA/B9B,YAwCWQ,EAAkC,SAAC,G,IAC9C1I,WACAqI,iBACAD,eACAR,2BACA7D,UACAD,UACAoC,cAUQtE,EAA2DkC,EAA3DlC,SAAU3C,EAAiD6E,EAAjD7E,SAAUM,EAAuCuE,EAAvCvE,aAAcD,EAAyBwE,EAAzBxE,qBACpCqJ,EAAQvE,mBACZ,kBACExC,EACE5B,EAAA,KAAW,SAAAnC,GAAC,MAAK,CACfkB,UAAWlB,EADI,UAEfmB,QAASnB,EAAEmB,YAEbqJ,GAAgB,EALV,EAMND,GAAc,GAPlB,KASA,CAACpI,EAAQf,EAAU2C,EAAUyG,EAV/B,IAaA,OACE,6BACExE,4BAAKE,EADP,yBAEEF,4BACG7D,GAAUA,SAAVA,EAA8BT,EAAaS,KAA3CA,WAHL,IAKG2I,EAAA,KAAU,qBACT,mCACEhB,IAAK,KAAOlK,GACR,CACFsG,MADE,EAEF6D,uBAFE,EAGFC,EAHE,EAIFvI,qBAJE,EAKF4G,oBC9HCT,EAAU,SAAC,G,IACtBuC,SACAY,kBACAC,mBACAC,wBACAC,kBACAtJ,iBACAuJ,mBACAlM,WACAgH,UACAC,UACAmC,cAEM+C,EAAqBH,IAA3B,EAEMI,IAAa,GAAkBpF,eAArC,GACM/D,EAAWgJ,KAAjB,S,ELgLF,SACE7C,EACArB,EACAL,GAGA,OAAOG,EADGuB,EAAYA,EAAH,aAAnB,EACsBrB,EAAtB,GKpLmCsE,CAAmB,EAEpD,CACEzE,UACEX,oBAECtE,GAAgBqE,eAAhBrE,GACGsE,EADHtE,iBAEGsJ,cACAhF,EADAgF,wBAEAhF,EARR,iBASEQ,MAAO,CACL6E,OADK,UAELC,OACE5J,GAAgBqE,eAAhBrE,eAEIsJ,0BALD,GAQL3B,OARK,GASLtE,MATK,GAULkE,QAVK,OAWLC,eAXK,SAYLK,WAAY,WAGhB,CAAEU,KAAF,EAAQkB,WAAR,EAAoBnJ,aA1BdkF,SAAMV,UAAOG,cA6BrB,KACE,OACE,qCACM,CACFkE,cADE,EAEFZ,KAFE,EAGFa,eAHE,EAIFC,oBAJE,EAKFC,cALE,EAMFtJ,aANE,EAOFuJ,eAPE,EAQFlM,OARE,EASFgH,MATE,EAUFC,WAMR,IAAMuF,EAAiBV,EAAa,UAEpBW,WAAY,WAE5B,OACE,yBACE7E,UAAWA,EACXH,MAAO+E,EACPjD,QAAS,kBAAM2C,EAAN,KAERlM,YANL,O,SCrEc0I,K,IACd9F,SACAsI,SACAvI,iBACAqJ,wBACAE,mBACAD,kBACAjM,WACAgH,UACAC,UACAmC,c,EN6KF,SACEA,EACArB,GAGA,OAAOF,EADGuB,EAAYA,EAAH,cAAnB,EACsBrB,EAAtB,IMhLwB2E,CAAoBtD,EAAW,CACrD3B,MAAO,CACLyC,QADK,OAELC,eAFK,aAGLpE,SAHK,SAILqE,cAAe,SALXjC,SAAMV,UASd,SAEI,qCACM,CACFyD,KADE,EAEFtI,KAFE,EAGFD,aAHE,EAIFqJ,oBAJE,EAKFE,eALE,EAMFD,cANE,EAOFjM,OAPE,EAQFgH,MARE,EASFC,WAON,yBAAKQ,MAAOA,GACT7E,EAAA,KAAS,qBACR,mCACEiI,IAAK,KAAOhG,GACR,CACFiH,cAAe9E,cADb,GAEFkE,KAFE,EAGFvI,aAHE,EAIFqJ,oBAJE,EAKFD,eALE,EAMFG,eANE,EAOFD,cAPE,EAQFjM,OARE,EASFgH,MATE,EAUFC,MAVE,EAWFmC,mBClDL,IAAMuD,EAA8B,SAAC,G,IAC1CC,mBACA9B,2BACA+B,kBACAtB,iBACAD,eACAJ,SACAzD,UACA2B,c,EAEiClC,IAAzBlH,WAAQiH,UAAOD,U,EAEiB8F,mBAAQ,MAAzCnK,OAAcoK,OAErBC,qBAAU,WACRD,QACAF,GAAiBA,EAAjBA,QACC,CAHHG,IAKA,IAAMd,EAAiB,SAAChB,GAClBvI,GAAgBqE,eAApB,IACE+F,QACAF,GAAiBA,EAAjBA,QAEAE,KACAF,GAAiBA,EAAjBA,K,EASoBvF,mBAAQ,kBAAMN,mBAAN,KAAoC,CAAC,EAAtC,IAAvBjE,SAAM2B,UAKRuH,EAAgB3E,mBACpB,kBAAMN,iBAAN,KACA,CAACjE,EAAM6J,EAFT,IAKM/J,EAA2ByE,mBAAQ,WACvC,cAAI3E,GACMiK,GAAD,YAA8B,gBAAG3K,EAAH,mBACnC+E,eADmC,MAIrC,KAED,CAACrE,EAAciK,EARlB,IAUA,OACE,yBAAKnF,MAAK,GAAIxB,UAAW,KAAf,IAER,qBAAUmD,UAAWA,IAGpB1E,EAAA,KAAU,cAMT,OALiBsC,qBAAjB,GAKkB,KAChB,kBAACD,IAAD,UAAgB8D,IAAK,KAAOlK,GAC1B,qCACM,CACFuK,KADE,EAEFtI,KAFE,EAGFD,aAHE,EAIFqJ,oBAJE,EAKFE,eALE,EAMFD,cANE,EAOFjM,OAPE,EAQFgH,MARE,EASFC,MATE,EAUFmC,mBAOV,qCACM,CACFiC,OAAM,GAAkBxI,SADtB,EAEFiI,uBAFE,EAGFjI,yBAHE,EAIFuI,eA9De,WACrByB,GAAiBA,EAAjBA,MACAE,SA6DMxB,aALE,EAMFD,WANE,EAOFtE,MAPE,EAQFC,MARE,EASFmC,iBCtFJ6D,EAA2B,SAAC,G,IAChCC,gBACApC,2BACA+B,kBACA/K,oBACAT,qBACA8L,aACAjK,WACAkK,qBACA7B,iBACAD,eACAlC,c,EAI0BlC,IAAlBlH,WAAQgH,UAET1D,EAAOwJ,mBAAeI,GAAe,IAAtB,MAAf5J,G,EACyBwJ,mBAAgB9F,oBAAR,IAAjCqG,OAAUC,O,EACOR,mBAAQ,GAAzB5B,OAAMqC,OAEPC,EAAeC,iBAArB,MAEAT,qBAAU,WACJQ,YAAJ,IACEJ,GAAoBA,EAApBA,GACAI,eAED,CAACH,EALJL,IAOA,IAAMJ,EAAiBtF,mBAA8C,WACnE,KAAY,OAAOpE,EAEnB,IAAMwK,EAAc1G,gBAApB,GACA,OAAOA,EAAA,2BACLlF,GADK,OAIL,IAAIZ,KACJwM,EALK,UAMLA,EANF,WAQC,CAAC,EAAD,UAZH,IA4CA,OACE,6BACE,qBACEvE,WAzBmB,SAACL,GACxB,aAAIA,EAAsB,CACxB,IAAMW,EAAQ,IAAd,KAKA,OAHA8D,UACAD,EAAYtG,oBAAZsG,IAKF,GAAIxE,YAAJ,SAA2BA,EAA3B,CAIA,IAAM6E,EAAU3N,SACT8I,cADS9I,WAAhB,SAIAuN,KACAD,EAAYtG,oBAAZsG,MAOIpE,MAAOlC,mBACPiC,UAAW,CACTD,SAAU,CAAES,MAAF,QAAkBC,SAAlB,WAAwCC,KAAM,SAE1DP,UAAWA,IAEb,qBACEwD,eAAgBA,EAChB1B,KAAMA,EACNJ,uBAAwBA,EACxB+B,cAAeA,EACftB,aAAcA,EACdD,WAAYA,EACZlC,UAAWA,MAMNwE,EAAuB,SAAC,G,IACnC5N,WACAiH,UACG4G,E,oIAAAA,uBAEH,OACE,qBACE7N,OAAQA,EACRiH,MAAOA,EAAQ,EAAH,WAAmC9B,GAE/C4B,qCALJ,M,gBCoEI+G,G,YAAiB,SAAC,GAAD,IACrBC,EADqB,EACrBA,QACAC,EAFqB,EAErBA,WAFqB,OAOrB,yBAAKpG,UAAU,iBACb,kBAAC,EAAD,eACEsB,MAAM,UACN+E,cAAc,WACV,CAAED,aAAYD,aAEpB,kBAAC,EAAD,eACE7E,MAAM,OACN+E,cAAc,QACV,CAAED,aAAYD,aAEpB,kBAAC,EAAD,eACE7E,MAAM,UACN+E,cAAc,WACV,CAAED,aAAYD,aAEpB,kBAAC,EAAD,eACE7E,MAAM,UACN+E,cAAc,UACV,CAAED,aAAYD,gBAKlBG,EAAgB,SAAC,GAAD,IACpBH,EADoB,EACpBA,QACAC,EAFoB,EAEpBA,WACAC,EAHoB,EAGpBA,cACA/E,EAJoB,EAIpBA,MAJoB,OAWpB,4BACEK,QAAS,kBAAMyE,EAAWC,IAC1BrG,UAAWuG,EAAgBJ,EAASE,IAEnC/E,IAICkF,EAAY,CAChBC,SAAU,WACV5I,WAAY,kBACZC,UAAW,YAEP4I,EAAY,CAChBD,SAAU,WACV5I,WAAY,kBACZC,UAAW,YAGPyI,EAAkB,SAACI,EAA0BN,GAA3B,OACtBM,IAAoBN,EAChB,yBACA,0BAEAO,EAAyC,GAEzCC,EAA0C,CAC9C,CAAC,EAAc,MACf,CAAC,MAAe,QAGZC,EAAuC,CAC3C,CAAC,EAAc,OACf,CAAC,MAAe,QAGZC,EAA0C,CAAC,CAAC,EAAc,QAiBjDC,MAxQO,WAAO,IAAD,EACkB9B,mBAEzC,IAHuB,mBACnB+B,EADmB,KACHC,EADG,OAMwBhC,oBAAS,GANjC,mBAMnBiC,EANmB,KAMAC,EANA,OAOgBlC,mBAAkB,WAPlC,mBAOnBmC,EAPmB,KAOJC,EAPI,OAQoBpC,mBAAe,IAAI5L,MARvC,mBAQnBiO,EARmB,KAQFC,EARE,OASUtC,mBAAS,GATnB,mBASnBuC,EATmB,KASPC,EATO,KA6CpBxN,EA4MR,SAA6BiM,GAC3B,OAAQA,GACN,IAAK,SACH,OAAOS,EACT,IAAK,UACH,OAAOC,EACT,IAAK,OACH,OAAOC,EACT,IAAK,UACH,OAAOC,GArNaY,CAAoBN,GAEtC9B,EAAsB,CAC1B,CACElL,UAAW,IAAIf,KAAK,KAAM,EAAG,EAAG,IAChCgB,QAAS,IAAIhB,KAAK,KAAM,EAAG,EAAG,KAEhC,CACEe,UAAW,IAAIf,KAAK,KAAM,EAAG,EAAG,GAAI,IACpCgB,QAAS,IAAIhB,KAAK,KAAM,EAAG,EAAG,MAK5BkI,EAAY9B,mBAChB,iCACKe,EADL,CAGEC,QAAS,CACPV,UAAW,mBACXH,MAAO,CAAExB,eAAWuJ,IAEtBjH,cAAe,CACbX,UAAW,uBACXH,MAAO,CAAEiE,QAAS,SAEpB7C,UAAW,CACTjB,UAAW,SAAC6H,GAAD,OACTZ,EAAeY,EAAEvE,KAAKwE,WAClB,oBACA,oBAERjH,QAAS,CACPhB,MAAO,CACLkI,YAAa,EACbC,YAAa,QACbC,kBAAmB,EACnBC,iBAAkB,EAClBC,YAAa,WAEfnI,UAAW,QAEbe,QAAS,CACPlB,MAAO,SAACgI,GAAD,OACLA,EAAErD,WACE,CAAE3G,WAAY,4BAA6B6E,OAAQ,GAAItE,MAAO,IAC9D,CAAEP,WAAY,8BACpBmC,UAAW,SAAC6H,GACV,IACMO,EADcP,EAAEvE,KAAKwE,YAAcP,EAAgBO,UAErD,oBACA,GACJ,OACGD,EAAErD,WACC,gCACAqD,EAAExM,SACF,gCACA,mCACJ+M,QAKR,CAACnB,EAAgBM,IAGnB,OACE,yBACE1H,MAAO,CACL4G,SAAU,aAGZ,6BACE,uBAAG4B,KAAK,yFAAR,SAIF,yBAAKxI,MAAO,CAAEyI,SAAU,IAAKC,UAAW,IAAKC,UAAW,SACtD,kBAAC,EAAD,CACEvF,IAAK,QAAUwE,EACflC,SAAUA,EACV9L,iBAtFiC,mBAuFjCrB,OAAQA,IACRkN,YAAaiC,EACbrE,uBAtHuB,SAAC/J,GAC9BsP,QAAQC,IAAI,gCAAiCvP,GAC7C,IAAMwP,EAAUxP,EAAEkB,UAAUyN,UACtBc,IAAgB3B,EAAe0B,GACrCzB,GAAkB,SAACD,GAAD,sBACbA,EADa,eAEf0B,EAAUC,EAAc,KAAOzP,QAiH5B8L,cA7Gc,SAAC4D,GACrBzB,IAAuByB,GAGnBA,GACFrB,EAAmBqB,IAyGfrD,iBA9FkB,SAAC5M,GAAD,OACxB6P,QAAQC,IAAI,kDAAmD9P,IA8FzDsB,gBAAiBA,EACjBsH,UAAWA,KAGf,yBACExB,UAAU,SACVH,MAAK,aACHzB,MAAO,OACPkK,SAAU,IACVQ,gBAAiB,0BACb3B,EAAoBX,EAAYE,EAJjC,CAKHqC,IAAK,EACLC,KAAM,KAGR,kBAAC,EAAD,CAAgB7C,QAASkB,EAAejB,WAAYkB,IACpD,4BACEtH,UAAU,mCACV2B,QAzHmB,WACzByF,GAAqB,GAIrBM,GAAc,SAACuB,GAAD,OAAaA,EAAU,OAkHjC,SAMC1B,GACC,yBACEvH,UAAU,eACVH,MAAO,CAAEqJ,MAAO,QAASC,aAAc,KAEvC,4CAJF,IAI4B/Q,IAAOmP,GAAiB5I,OAAO,eCxKjDyK,QACW,cAA7BC,OAAOC,SAASC,UAEe,UAA7BF,OAAOC,SAASC,UAEhBF,OAAOC,SAASC,SAASC,MACvB,2DCZNC,IAASC,OAAO,kBAAC,EAAD,MAASC,SAASC,eAAe,SDmI3C,kBAAmBC,WACrBA,UAAUC,cAAcC,MAAMC,MAAK,SAAAC,GACjCA,EAAaC,iB","file":"static/js/main.52456720.chunk.js","sourcesContent":["import {\r\n  Range,\r\n  MsSinceMidnightRange,\r\n  AvailabilityEvent,\r\n  Booking,\r\n} from '../types';\r\nimport { MomentCtrFunc } from '../moment-types/moment-subset';\r\n\r\nexport function createUtils(moment: MomentCtrFunc) {\r\n  function intervalLengthMs(interval: AvailabilityEvent) {\r\n    return interval.endDate.getTime() - interval.startDate.getTime();\r\n  }\r\n\r\n  function chunkify(\r\n    intervals: AvailabilityEvent[],\r\n    chunkLenMs: number,\r\n    stepLenMs: number\r\n    // shouldMerge = false\r\n  ) {\r\n    // const merged = shouldMerge ? mergeIntervals(intervals) : intervals;\r\n    const res: AvailabilityEvent[] = [];\r\n    for (const interval of intervals) {\r\n      const endMs = interval.endDate.getTime();\r\n      for (let ms = interval.startDate.getTime(); ms < endMs; ms += stepLenMs) {\r\n        // const msRounded = Math.floor(ms / (msInHour / 2.0)) * (msInHour / 2.0);\r\n        const msRounded = ms;\r\n        const chunk = {\r\n          startDate: new Date(msRounded),\r\n          endDate: new Date(Math.min(endMs, msRounded + chunkLenMs)),\r\n        };\r\n        if (intervalLengthMs(chunk) >= chunkLenMs) {\r\n          res.push(chunk);\r\n        }\r\n      }\r\n      // if (res.length > 0 && intervalLengthMs(res[res.length - 1]) < chunkLenMs) {\r\n      //   const last = res.pop();\r\n      // if (res.length > 0) {\r\n      //   // append the too-short last chunk to previous chunk if it's there\r\n      //   res[res.length - 1].endDate = (last as Interval).endDate;\r\n      // }\r\n      // }\r\n    }\r\n    return res;\r\n  }\r\n\r\n  const msInDay = 24 * 60 * 60 * 1000;\r\n  const msInHour = 1 * 60 * 60 * 1000;\r\n\r\n  function rotateMs(ms: number, msOffset: number) {\r\n    msOffset =\r\n      msOffset > 0 ? Math.min(msInDay, msOffset) : Math.max(-msInDay, msOffset);\r\n    ms = Math.min(msInDay, Math.max(0, ms));\r\n    const rotated = ms - msOffset;\r\n    return rotated < 0 ? rotated + msInDay : rotated;\r\n  }\r\n\r\n  function rotateRangesByms(ranges: MsSinceMidnightRange[], msOffset: number) {\r\n    // make sure ranges are not overlapping\r\n    const shifted = ranges.map(r => [\r\n      rotateMs(r[0], msOffset) % msInDay,\r\n      rotateMs(r[1], msOffset) % msInDay,\r\n    ]);\r\n\r\n    // if the new \"midnight\" happens in the middle of a range, break it into 2\r\n    const foldedRangeIndices = shifted\r\n      .map((range, i) => (range[1] < range[0] ? i : -1))\r\n      .filter(i => i >= 0);\r\n    for (const foldedRangeIndex of foldedRangeIndices) {\r\n      const foldedRange = shifted[foldedRangeIndex];\r\n      shifted[foldedRangeIndex] = [-1, -1]; // mark for deletion (do not disturb indices)\r\n      shifted.push([foldedRange[0], msInDay]); //start till midnight\r\n      shifted.push([0, foldedRange[1]]); // beginning-of-day till end\r\n    }\r\n\r\n    const filtered = shifted.filter(r => r[0] >= 0);\r\n\r\n    filtered.sort((a, b) => a[0] - b[0]);\r\n\r\n    return filtered;\r\n  }\r\n\r\n  function calcOffsetFromProviderTimeZoneMs(\r\n    localMs: number,\r\n    providerTimeZone: string\r\n  ) {\r\n    if (!providerTimeZone) return 0;\r\n\r\n    const localDate = new Date(localMs);\r\n\r\n    var localDateInProviderTz = new Date(\r\n      localDate.toLocaleString('en-US', {\r\n        timeZone: providerTimeZone,\r\n      })\r\n    );\r\n    const offsetRoundedToNearestHour =\r\n      Math.floor(\r\n        (localDateInProviderTz.getTime() - localDate.getTime()) / msInHour + 0.5\r\n      ) * msInHour;\r\n\r\n    return offsetRoundedToNearestHour;\r\n  }\r\n\r\n  const ms_in_hour = 60 * 60 * 1000;\r\n\r\n  function roundToHour(ms: number) {\r\n    return Math.floor(ms / msInHour) * msInHour;\r\n  }\r\n\r\n  function formatAsDate(date: Date) {\r\n    return moment(date).format('ddd, MMM Do YYYY');\r\n  }\r\n\r\n  function formatAsDateWithTime(date: Date) {\r\n    return moment(date).format('ddd, MMM Do h:mma');\r\n  }\r\n\r\n  function formatAsDateJustTime(date: Date) {\r\n    return moment(date).format('h:mma');\r\n  }\r\n\r\n  function formatAsMonth(date: Date) {\r\n    return moment(date).format('MMM YYYY');\r\n  }\r\n\r\n  function availByIndex(days: Date[], avails: AvailabilityEvent[]) {\r\n    return (days || []).map(d => ({\r\n      hasAvail: avails.some(a => datesEqual(a.startDate, d)),\r\n    }));\r\n  }\r\n\r\n  function sameWeek(d1: Date, d2: Date) {\r\n    return datesEqual(\r\n      moment(d1)\r\n        .startOf('week')\r\n        .toDate(),\r\n      moment(d2)\r\n        .startOf('week')\r\n        .toDate()\r\n    );\r\n  }\r\n\r\n  function sameMonth(d1: Date, d2: Date) {\r\n    return datesEqual(\r\n      moment(d1)\r\n        .startOf('month')\r\n        .toDate(),\r\n      moment(d2)\r\n        .startOf('month')\r\n        .toDate()\r\n    );\r\n  }\r\n\r\n  function datesEqual(d1: Date, d2: Date) {\r\n    return (\r\n      d1 &&\r\n      d2 &&\r\n      d1.getFullYear() === d2.getFullYear() &&\r\n      d1.getMonth() === d2.getMonth() &&\r\n      d1.getDate() === d2.getDate()\r\n    );\r\n  }\r\n\r\n  function monthDaysForDate(date: Date) {\r\n    const startOfMonth = moment(date).startOf('month');\r\n    const endOfMonth = moment(date).endOf('month');\r\n    const startOfWeek = startOfMonth.startOf('week');\r\n    const endOfWeek = endOfMonth.endOf('week');\r\n    const numDays = endOfWeek.diff(startOfWeek, 'days') + 1;\r\n\r\n    const weeks = [];\r\n    const days = [];\r\n    const d = startOfWeek;\r\n\r\n    const numWeeks = Math.floor(numDays / 7);\r\n    for (let i = 0; i < numWeeks; ++i) {\r\n      const w: Date[] = [];\r\n      weeks.push(w);\r\n      for (let j = 0; j < 7; ++j) {\r\n        w.push(d.toDate());\r\n        days.push(d.toDate());\r\n        d.add(1, 'day');\r\n      }\r\n    }\r\n\r\n    return { weeks, days };\r\n  }\r\n\r\n  function shouldHideWeek(\r\n    selectedDate: Date | null,\r\n    week: Date[],\r\n    viewingDayAvailabilities: AvailabilityEvent[]\r\n  ) {\r\n    return (\r\n      selectedDate &&\r\n      !sameWeek(selectedDate, week[0]) &&\r\n      viewingDayAvailabilities.length > 0\r\n    );\r\n  }\r\n\r\n  function addBlockOutBookings(\r\n    blockOutPeriods: MsSinceMidnightRange[],\r\n    providerTimeZone: string,\r\n    bookings: Booking[],\r\n    localStart: Date, //client local start, might not be midnight\r\n    localEnd: Date //client local end midnight\r\n  ) {\r\n    const res = [...bookings];\r\n    const periodStartRoundedToDayMs = new Date(\r\n      localStart.getFullYear(),\r\n      localStart.getMonth(),\r\n      localStart.getDate()\r\n    ).getTime();\r\n    const periodEndRoundedToDayMs = new Date(\r\n      localEnd.getFullYear(),\r\n      localEnd.getMonth(),\r\n      localEnd.getDate()\r\n    ).getTime();\r\n\r\n    for (\r\n      let i = periodStartRoundedToDayMs;\r\n      i <= periodEndRoundedToDayMs;\r\n      i = i + msInDay\r\n    ) {\r\n      const tzOffsetMs = calcOffsetFromProviderTimeZoneMs(i, providerTimeZone);\r\n      const blockOutPeriodsTz = rotateRangesByms(blockOutPeriods, tzOffsetMs);\r\n      for (const period of blockOutPeriodsTz) {\r\n        res.push({\r\n          startDate: new Date(i + period[0]),\r\n          endDate: new Date(i + period[1]),\r\n        });\r\n      }\r\n\r\n      // Ensure each availability is broken up at local EOD and doesn't span days\r\n      res.push({\r\n        startDate: new Date(i + msInDay - 1),\r\n        endDate: new Date(i + msInDay),\r\n      });\r\n    }\r\n    return res;\r\n  }\r\n\r\n  function availabilitiesFromBookings(\r\n    blockOutPeriods: MsSinceMidnightRange[],\r\n    providerTimeZone: string,\r\n    bookings: Booking[],\r\n    now: Date,\r\n    periodStartArg: Date,\r\n    periodEnd: Date\r\n  ) {\r\n    const periodStartMs = Math.max(\r\n      roundToHour(now.getTime()) + ms_in_hour,\r\n      periodStartArg.getTime()\r\n    );\r\n    const periodStart = new Date(periodStartMs);\r\n    if (periodEnd.getTime() <= periodStart.getTime()) {\r\n      return [];\r\n    }\r\n    const withBlockouts = addBlockOutBookings(\r\n      blockOutPeriods,\r\n      providerTimeZone,\r\n      bookings,\r\n      periodStart,\r\n      periodEnd\r\n    );\r\n    const sorted = withBlockouts.sort(\r\n      (a, b) => a.startDate.getTime() - b.startDate.getTime()\r\n    );\r\n    // Mark the whole period available to start\r\n    const res: AvailabilityEvent[] = [\r\n      {\r\n        startDate: periodStart,\r\n        endDate: periodEnd,\r\n      },\r\n    ];\r\n    for (const booking of sorted) {\r\n      const lastAvailability = res[res.length - 1];\r\n      const bookingStartMs = booking.startDate.getTime();\r\n      const bookingEndMs = booking.endDate.getTime();\r\n      if (\r\n        !booking.startDate ||\r\n        !booking.endDate ||\r\n        bookingStartMs >= bookingEndMs\r\n      ) {\r\n        continue;\r\n      }\r\n      if (bookingStartMs < lastAvailability.startDate.getTime()) {\r\n        // move lastAvailability start date to be past booking end\r\n        lastAvailability.startDate = new Date(\r\n          Math.max(lastAvailability.startDate.getTime(), bookingEndMs)\r\n        );\r\n      } else if (bookingStartMs < lastAvailability.endDate.getTime()) {\r\n        const saveEndDate = lastAvailability.endDate;\r\n        // cut off lastAvailability before booking start\r\n        lastAvailability.endDate = new Date(bookingStartMs);\r\n        if (bookingEndMs < saveEndDate.getTime()) {\r\n          //create new availability after booking end\r\n          res.push({ startDate: new Date(bookingEndMs), endDate: saveEndDate });\r\n        }\r\n      }\r\n    }\r\n    return res;\r\n  }\r\n\r\n  function toStartAndEnd(range: Range) {\r\n    const res = {\r\n      startDate:\r\n        (range as {\r\n          start: Date;\r\n        }).start || (range as Date[])[0],\r\n      endDate:\r\n        (range as {\r\n          end: Date;\r\n        }).end || (range as Date[])[(range as Date[]).length - 1],\r\n    };\r\n    if (res.startDate.getTime() === res.endDate.getTime()) {\r\n      res.endDate = new Date(res.endDate.getTime() + msInDay);\r\n    }\r\n    return res;\r\n  }\r\n\r\n  function monthRangeForDate(d: Date) {\r\n    return {\r\n      start: moment(d)\r\n        .startOf('month')\r\n        .toDate(),\r\n      end: moment(d)\r\n        .endOf('month')\r\n        .toDate(),\r\n    };\r\n  }\r\n\r\n  return {\r\n    msInHour,\r\n    datesEqual,\r\n    formatAsMonth,\r\n    sameMonth,\r\n    formatAsDateWithTime,\r\n    formatAsDateJustTime,\r\n    formatAsDate,\r\n    shouldHideWeek,\r\n    availByIndex,\r\n    addBlockOutBookings,\r\n    availabilitiesFromBookings,\r\n    toStartAndEnd,\r\n    monthRangeForDate,\r\n    monthDaysForDate,\r\n    chunkify,\r\n  };\r\n}\r\n","import { MomentCtrFunc } from './moment-types/moment-subset';\r\nimport { createUtils } from './utils';\r\nimport { CSSProperties } from 'react';\r\n\r\nexport interface CalendarTheme {\r\n  dayClassBase: string;\r\n  dayClassSelected: string;\r\n  dayClassHasAvailability: string;\r\n  dayClassDefault: string;\r\n\r\n  slotsContainerStyleShow: CSSProperties;\r\n  slotsContainerStyleHide: CSSProperties;\r\n  slotContainerCloseClass: string;\r\n  slotButtonClass: string;\r\n\r\n  toolBarStyle: CSSProperties;\r\n  toolBarButtonsContainerClass: string;\r\n  toolBarButtonClass: string;\r\n  toolBarLabelClass: string;\r\n\r\n  requestAppointmentLabel: string;\r\n}\r\n\r\nexport interface CalendarThemeProp {\r\n  dayClassBase?: string;\r\n  dayClassSelected?: string;\r\n  dayClassHasAvailability?: string;\r\n  dayClassDefault?: string;\r\n\r\n  slotsContainerStyleShow?: CSSProperties;\r\n  slotsContainerStyleHide?: CSSProperties;\r\n  slotContainerCloseClass?: string;\r\n  slotButtonClass?: string;\r\n\r\n  toolBarStyle?: CSSProperties;\r\n  toolBarButtonsContainerClass?: string;\r\n  toolBarButtonClass?: string;\r\n  toolBarLabelClass?: string;\r\n\r\n  requestAppointmentLabel?: string;\r\n}\r\n\r\nexport const defaultTheme: CalendarTheme = {\r\n  dayClassBase: 'rounded-circle',\r\n  dayClassSelected: 'border-primary',\r\n  dayClassHasAvailability: 'border-info',\r\n  dayClassDefault: 'border border-default',\r\n\r\n  slotsContainerStyleShow: {\r\n    transition: 'transform 300ms',\r\n    transform: 'scale(1)',\r\n  },\r\n  slotsContainerStyleHide: {\r\n    transition: 'transform 300ms',\r\n    transform: 'scale(0)',\r\n  },\r\n  slotContainerCloseClass: 'close',\r\n  slotButtonClass: 'btn btn-primary',\r\n\r\n  toolBarStyle: {\r\n    flexWrap: 'nowrap',\r\n    width: '100%',\r\n    minHeight: 50,\r\n  },\r\n  toolBarButtonsContainerClass: 'border btn-group w-100',\r\n  toolBarButtonClass: 'btn',\r\n  toolBarLabelClass: 'btn btn-link',\r\n\r\n  requestAppointmentLabel: 'Request Appointment',\r\n};\r\n\r\nexport interface AvailabilityEvent {\r\n  startDate: Date;\r\n  endDate: Date;\r\n}\r\n\r\nexport interface Booking {\r\n  startDate: Date;\r\n  endDate: Date;\r\n}\r\n\r\nexport type NavigateAction = 'PREV' | 'NEXT' | 'TODAY' | 'DATE';\r\nexport interface Navigate {\r\n  [key: string]: NavigateAction;\r\n}\r\n\r\nexport interface ToolBarProps {\r\n  label: string;\r\n  onNavigate: (action: NavigateAction) => any;\r\n  localizer: { messages: { [key: string]: string } };\r\n}\r\n\r\nexport interface ToolBarButtonProps {\r\n  message: string;\r\n  onClicked: () => void;\r\n}\r\n\r\ntype stringOrDate = string | Date;\r\n\r\nexport type Range = Date[] | { start: stringOrDate; end: stringOrDate };\r\n\r\nexport interface AvailabilityCalendarProps {\r\n  moment: MomentCtrFunc;\r\n  theme?: CalendarThemeProp;\r\n  onCalRangeChange?: (range: Range) => any;\r\n  providerTimeZone: string;\r\n  bookings: Booking[];\r\n  avails?: AvailabilityEvent[];\r\n  initialDate: Date | null;\r\n  onAvailabilitySelected: (e: AvailabilityEvent) => any;\r\n  onDaySelected?: (d: Date | null) => any;\r\n  blockOutPeriods?: MsSinceMidnightRange[];\r\n  slotLengthMs?: number;\r\n  slotStepMs?: number;\r\n}\r\n\r\nexport interface MonthlyAvailabilityCalendarProps {\r\n  availabilities: AvailabilityEvent[];\r\n  date: Date;\r\n  style?: CSSProperties;\r\n  onDaySelected?: (d: Date | null) => any;\r\n  onAvailabilitySelected: (e: AvailabilityEvent) => any;\r\n  slotLengthMs?: number;\r\n  slotStepMs?: number;\r\n}\r\n\r\nexport interface DayCellProps {\r\n  selectedDate: Date | null;\r\n  shouldDisplay: boolean;\r\n  date: Date;\r\n  dayIndexInWeek: number;\r\n  weekIndexInCalRange: number;\r\n  handleSelected: (d: Date) => any;\r\n  availsByIndex: HasAvail[];\r\n  moment: MomentCtrFunc;\r\n  utils: ReturnType<typeof createUtils>;\r\n  theme: CalendarTheme;\r\n}\r\n\r\nexport interface DayCellsProps {\r\n  week: Date[];\r\n  date: Date;\r\n  selectedDate: Date | null;\r\n  weekIndexInCalRange: number;\r\n  handleSelected: (date: Date) => void;\r\n  availsByIndex: {\r\n    hasAvail: boolean;\r\n  }[];\r\n\r\n  moment: MomentCtrFunc;\r\n  utils: ReturnType<typeof createUtils>;\r\n  theme: CalendarTheme;\r\n}\r\n\r\nexport interface AvailSlotsProps {\r\n  viewingDayAvailabilities: AvailabilityEvent[];\r\n  handleUnselect: () => any;\r\n  show: boolean;\r\n  onAvailabilitySelected: (e: AvailabilityEvent) => any;\r\n  slotLengthMs?: number;\r\n  slotStepMs?: number;\r\n\r\n  utils: ReturnType<typeof createUtils>;\r\n  theme: CalendarTheme;\r\n}\r\n\r\nexport interface AvailSlotProps {\r\n  theme: CalendarTheme;\r\n  onAvailabilitySelected: (e: AvailabilityEvent) => any;\r\n  s: AvailabilityEvent;\r\n  formatAsDateJustTime: (date: Date) => string;\r\n}\r\n\r\nexport interface HasAvail {\r\n  hasAvail: boolean;\r\n}\r\n\r\nexport interface Booking {\r\n  id?: string;\r\n  startDate: Date;\r\n  endDate: Date;\r\n  isBlockout?: boolean;\r\n  resourceId?: number;\r\n}\r\n\r\nexport type MsSinceMidnightRange = number[];\r\n","declare function moment1(...args: any): MomentSubset;\r\n\r\nexport type MomentCtrFunc = typeof moment1;\r\n\r\ntype RelativeTimeKey =\r\n  | 's'\r\n  | 'ss'\r\n  | 'm'\r\n  | 'mm'\r\n  | 'h'\r\n  | 'hh'\r\n  | 'd'\r\n  | 'dd'\r\n  | 'M'\r\n  | 'MM'\r\n  | 'y'\r\n  | 'yy';\r\ntype CalendarKey =\r\n  | 'sameDay'\r\n  | 'nextDay'\r\n  | 'lastDay'\r\n  | 'nextWeek'\r\n  | 'lastWeek'\r\n  | 'sameElse'\r\n  | string;\r\ntype LongDateFormatKey =\r\n  | 'LTS'\r\n  | 'LT'\r\n  | 'L'\r\n  | 'LL'\r\n  | 'LLL'\r\n  | 'LLLL'\r\n  | 'lts'\r\n  | 'lt'\r\n  | 'l'\r\n  | 'll'\r\n  | 'lll'\r\n  | 'llll';\r\n\r\ninterface Locale {\r\n  calendar(key?: CalendarKey, m?: MomentSubset, now?: MomentSubset): string;\r\n\r\n  longDateFormat(key: LongDateFormatKey): string;\r\n  invalidDate(): string;\r\n  ordinal(n: number): string;\r\n\r\n  preparse(inp: string): string;\r\n  postformat(inp: string): string;\r\n  relativeTime(\r\n    n: number,\r\n    withoutSuffix: boolean,\r\n    key: RelativeTimeKey,\r\n    isFuture: boolean\r\n  ): string;\r\n  pastFuture(diff: number, absRelTime: string): string;\r\n  set(config: Object): void;\r\n\r\n  months(): string[];\r\n  months(m: MomentSubset, format?: string): string;\r\n  monthsShort(): string[];\r\n  monthsShort(m: MomentSubset, format?: string): string;\r\n  monthsParse(monthName: string, format: string, strict: boolean): number;\r\n  monthsRegex(strict: boolean): RegExp;\r\n  monthsShortRegex(strict: boolean): RegExp;\r\n\r\n  week(m: MomentSubset): number;\r\n  firstDayOfYear(): number;\r\n  firstDayOfWeek(): number;\r\n\r\n  weekdays(): string[];\r\n  weekdays(m: MomentSubset, format?: string): string;\r\n  weekdaysMin(): string[];\r\n  weekdaysMin(m: MomentSubset): string;\r\n  weekdaysShort(): string[];\r\n  weekdaysShort(m: MomentSubset): string;\r\n  weekdaysParse(weekdayName: string, format: string, strict: boolean): number;\r\n  weekdaysRegex(strict: boolean): RegExp;\r\n  weekdaysShortRegex(strict: boolean): RegExp;\r\n  weekdaysMinRegex(strict: boolean): RegExp;\r\n\r\n  isPM(input: string): boolean;\r\n  meridiem(hour: number, minute: number, isLower: boolean): string;\r\n}\r\n\r\ninterface Duration {\r\n  clone(): Duration;\r\n\r\n  humanize(withSuffix?: boolean): string;\r\n\r\n  abs(): Duration;\r\n\r\n  as(units: Base): number;\r\n  get(units: Base): number;\r\n\r\n  milliseconds(): number;\r\n  asMilliseconds(): number;\r\n\r\n  seconds(): number;\r\n  asSeconds(): number;\r\n\r\n  minutes(): number;\r\n  asMinutes(): number;\r\n\r\n  hours(): number;\r\n  asHours(): number;\r\n\r\n  days(): number;\r\n  asDays(): number;\r\n\r\n  weeks(): number;\r\n  asWeeks(): number;\r\n\r\n  months(): number;\r\n  asMonths(): number;\r\n\r\n  years(): number;\r\n  asYears(): number;\r\n\r\n  add(inp?: DurationInputArg1, unit?: DurationInputArg2): Duration;\r\n  subtract(inp?: DurationInputArg1, unit?: DurationInputArg2): Duration;\r\n\r\n  locale(): string;\r\n  locale(locale: LocaleSpecifier): Duration;\r\n  localeData(): Locale;\r\n\r\n  toISOString(): string;\r\n  toJSON(): string;\r\n\r\n  isValid(): boolean;\r\n\r\n  /**\r\n   * @deprecated since version 2.8.0\r\n   */\r\n  lang(locale: LocaleSpecifier): MomentSubset;\r\n  /**\r\n   * @deprecated since version 2.8.0\r\n   */\r\n  lang(): Locale;\r\n  /**\r\n   * @deprecated\r\n   */\r\n  toIsoString(): string;\r\n}\r\n\r\ntype Base =\r\n  | 'year'\r\n  | 'years'\r\n  | 'y'\r\n  | 'month'\r\n  | 'months'\r\n  | 'M'\r\n  | 'week'\r\n  | 'weeks'\r\n  | 'w'\r\n  | 'day'\r\n  | 'days'\r\n  | 'd'\r\n  | 'hour'\r\n  | 'hours'\r\n  | 'h'\r\n  | 'minute'\r\n  | 'minutes'\r\n  | 'm'\r\n  | 'second'\r\n  | 'seconds'\r\n  | 's'\r\n  | 'millisecond'\r\n  | 'milliseconds'\r\n  | 'ms';\r\n\r\ntype _quarter = 'quarter' | 'quarters' | 'Q';\r\ntype _isoWeek = 'isoWeek' | 'isoWeeks' | 'W';\r\ntype _date = 'date' | 'dates' | 'D';\r\ntype DurationConstructor = Base | _quarter;\r\n\r\ntype StartOf = Base | _quarter | _isoWeek | _date | void; // null\r\n\r\ntype Diff = Base | _quarter;\r\n\r\ninterface MomentInputObject {\r\n  years?: number;\r\n  year?: number;\r\n  y?: number;\r\n\r\n  months?: number;\r\n  month?: number;\r\n  M?: number;\r\n\r\n  days?: number;\r\n  day?: number;\r\n  d?: number;\r\n\r\n  dates?: number;\r\n  date?: number;\r\n  D?: number;\r\n\r\n  hours?: number;\r\n  hour?: number;\r\n  h?: number;\r\n\r\n  minutes?: number;\r\n  minute?: number;\r\n  m?: number;\r\n\r\n  seconds?: number;\r\n  second?: number;\r\n  s?: number;\r\n\r\n  milliseconds?: number;\r\n  millisecond?: number;\r\n  ms?: number;\r\n}\r\n\r\ninterface DurationInputObject extends MomentInputObject {\r\n  quarters?: number;\r\n  quarter?: number;\r\n  Q?: number;\r\n\r\n  weeks?: number;\r\n  week?: number;\r\n  w?: number;\r\n}\r\n\r\ninterface FromTo {\r\n  from: MomentInput;\r\n  to: MomentInput;\r\n}\r\n\r\ntype MomentInput =\r\n  | MomentSubset\r\n  | Date\r\n  | string\r\n  | number\r\n  | (number | string)[]\r\n  | MomentInputObject\r\n  | void; // null | undefined\r\n\r\ntype MomentInputSubset =\r\n  | MomentSubset\r\n  | Date\r\n  | string\r\n  | number\r\n  | (number | string)[]\r\n  | MomentInputObject\r\n  | void; // null | undefined\r\n\r\ntype DurationInputArg1 =\r\n  | Duration\r\n  | number\r\n  | string\r\n  | FromTo\r\n  | DurationInputObject\r\n  | void; // null | undefined\r\ntype DurationInputArg2 = DurationConstructor;\r\ntype LocaleSpecifier = string | MomentSubset | Duration | string[] | boolean;\r\n\r\nexport interface MomentSubset extends Object {\r\n  format(format?: string): string;\r\n\r\n  startOf(unitOfTime: StartOf): MomentSubset;\r\n  endOf(unitOfTime: StartOf): MomentSubset;\r\n\r\n  add(amount?: DurationInputArg1, unit?: DurationInputArg2): MomentSubset;\r\n\r\n  diff(b: MomentInputSubset, unitOfTime?: Diff, precise?: boolean): number;\r\n\r\n  toDate(): Date;\r\n}\r\n\r\nexport const momentSubsetStub: MomentSubset = {\r\n  format: (_format?: string) => {\r\n    throw new Error('not implemented');\r\n  },\r\n\r\n  startOf: (_unitOfTime: StartOf) => {\r\n    throw new Error('not implemented');\r\n  },\r\n  endOf: (_unitOfTime: StartOf) => {\r\n    throw new Error('not implemented');\r\n  },\r\n\r\n  add: (_amount?: DurationInputArg1, _unit?: DurationInputArg2) => {\r\n    throw new Error('not implemented');\r\n  },\r\n\r\n  diff: (_b: MomentInputSubset, _unitOfTime?: Diff, _precise?: boolean) => {\r\n    throw new Error('not implemented');\r\n  },\r\n\r\n  toDate: () => {\r\n    throw new Error('not implemented');\r\n  },\r\n};\r\n","import React, { useContext, useMemo } from 'react';\r\nimport { createUtils } from './utils';\r\nimport { CalendarTheme, defaultTheme } from './types';\r\nimport { MomentCtrFunc, momentSubsetStub } from './moment-types/moment-subset';\r\n\r\nexport interface CalendarContextValue {\r\n  moment: MomentCtrFunc;\r\n  utils: ReturnType<typeof createUtils>;\r\n  theme: CalendarTheme;\r\n}\r\n\r\nexport const CalendarContext = React.createContext<CalendarContextValue>({\r\n  moment: () => momentSubsetStub,\r\n  utils: createUtils(() => momentSubsetStub),\r\n  theme: defaultTheme,\r\n});\r\n\r\nexport const useCalendarContext = () => useContext(CalendarContext);\r\n\r\nexport const CalendarContextProvider = ({ moment, theme, children }: any) => {\r\n  const utils = useMemo(() => createUtils(moment), [moment]);\r\n\r\n  return (\r\n    <CalendarContext.Provider\r\n      value={{\r\n        moment,\r\n        utils,\r\n        theme,\r\n      }}\r\n    >\r\n      {children}\r\n    </CalendarContext.Provider>\r\n  );\r\n};\r\n","import { CSSProperties } from 'react';\r\n\r\ntype StyleOrFunc<StyleProps> =\r\n  | CSSProperties\r\n  | ((p: StyleProps) => CSSProperties);\r\n\r\ntype ClassNameOrFunc<StyleProps> =\r\n  | (string | undefined)\r\n  | ((p: StyleProps) => string | undefined);\r\n\r\nexport interface OverridableComponentProps<\r\n  ComponentProps,\r\n  InternalProps,\r\n  StyleProps\r\n> {\r\n  style?: StyleOrFunc<StyleProps>;\r\n  className?: ClassNameOrFunc<StyleProps>;\r\n  Root?: React.ElementType<ComponentProps>;\r\n  internalProps?: InternalProps;\r\n}\r\n\r\nexport interface ResolvedOverride<ComponentProps, InternalProps> {\r\n  style?: CSSProperties;\r\n  className?: string;\r\n  Root?: React.ElementType<ComponentProps>;\r\n  internalProps?: InternalProps;\r\n}\r\n\r\nfunction resolveStyle<StyleProps>(\r\n  style?: StyleOrFunc<StyleProps>,\r\n  styleProps?: StyleProps\r\n) {\r\n  if (typeof style === 'function') {\r\n    return styleProps ? style(styleProps) : style({} as any);\r\n  }\r\n  return style;\r\n}\r\n\r\nfunction resolveClassName<StyleProps>(\r\n  className?: ClassNameOrFunc<StyleProps>,\r\n  styleProps?: StyleProps\r\n) {\r\n  if (typeof className === 'function') {\r\n    return styleProps ? className(styleProps) : className({} as any);\r\n  }\r\n  return className;\r\n}\r\n\r\nexport function getOverride<\r\n  O extends OverridableComponentProps<T, U, K>,\r\n  T,\r\n  U,\r\n  K\r\n>(\r\n  o: O | undefined,\r\n  defaultSpec: O,\r\n  styleProps?: K,\r\n  _t?: T,\r\n  _u?: U,\r\n  _k?: K\r\n): ResolvedOverride<T, U> {\r\n  if (o === undefined) {\r\n    return {\r\n      Root: defaultSpec.Root,\r\n      className: resolveClassName(defaultSpec.className, styleProps),\r\n      style: { ...resolveStyle(defaultSpec.style, styleProps) },\r\n      internalProps: defaultSpec.internalProps,\r\n    };\r\n  }\r\n\r\n  return {\r\n    Root: o.Root || defaultSpec.Root,\r\n    className:\r\n      resolveClassName(o.className, styleProps) ||\r\n      resolveClassName(defaultSpec.className, styleProps),\r\n    style: {\r\n      ...resolveStyle(defaultSpec.style, styleProps),\r\n      ...resolveStyle(o.style, styleProps),\r\n    },\r\n    internalProps: { ...defaultSpec.internalProps, ...o.internalProps } as U,\r\n  };\r\n}\r\n","import {\r\n  DayCellProps,\r\n  DayCellsProps,\r\n  ToolBarProps,\r\n  AvailSlotsProps,\r\n  ToolBarButtonProps,\r\n  AvailSlotProps,\r\n} from '../types';\r\nimport {\r\n  OverridableComponentProps,\r\n  ResolvedOverride,\r\n  getOverride,\r\n} from './general';\r\n\r\nconst DefaultToolBar: OverridableComponentProps<ToolBarProps, {}, {}> = {};\r\n\r\nconst DefaultToolBarButton: OverridableComponentProps<\r\n  ToolBarButtonProps,\r\n  {},\r\n  {}\r\n> = {};\r\n\r\nconst DefaultWeekdays: OverridableComponentProps<{}, {}, {}> = {};\r\nconst DefaultWeekday: OverridableComponentProps<\r\n  { weekday: string },\r\n  {},\r\n  {}\r\n> = {};\r\n\r\nconst DefaultDayCells: OverridableComponentProps<DayCellsProps, {}, {}> = {};\r\n\r\nconst DefaultDayCell: OverridableComponentProps<\r\n  DayCellProps,\r\n  {},\r\n  { date: Date; isSelected: boolean; hasAvail: boolean }\r\n> = {};\r\n\r\nconst DefaultAvailabiliies: OverridableComponentProps<\r\n  AvailSlotsProps,\r\n  {},\r\n  {}\r\n> = {};\r\n\r\nconst DefaultAvailSlot: OverridableComponentProps<\r\n  AvailSlotProps,\r\n  {},\r\n  { date: Date }\r\n> = {};\r\n\r\n// type ExtractComponentProps<\r\n//   Overridable\r\n// > = Overridable extends OverridableComponentProps<infer T, infer _U, infer _Z>\r\n//   ? T\r\n//   : never;\r\n// type ExtractInternalProps<\r\n//   Overridable\r\n// > = Overridable extends OverridableComponentProps<infer _T, infer U, infer _Z>\r\n//   ? U\r\n//   : never;\r\ntype ExtractStyleProps<\r\n  Overridable\r\n> = Overridable extends OverridableComponentProps<infer _T, infer _U, infer Z>\r\n  ? Z\r\n  : never;\r\n\r\nexport const defaultComponents = {\r\n  ToolBar: DefaultToolBar,\r\n  ToolBarButton: DefaultToolBarButton,\r\n  Weekdays: DefaultWeekdays,\r\n  Weekday: DefaultWeekday,\r\n  DayCells: DefaultDayCells,\r\n  DayCell: DefaultDayCell,\r\n  Availabilities: DefaultAvailabiliies,\r\n  AvailSlot: DefaultAvailSlot,\r\n};\r\n\r\nexport type Overrides = typeof defaultComponents;\r\n\r\n// export function getOverride<Key extends keyof Overrides>(\r\n//   key: Key,\r\n//   overrides: Overrides | undefined,\r\n//   props?: ExtractInternalProps<Overrides[Key]>,\r\n//   style?: CSSProperties\r\n// ): OverridableComponentProps<\r\n//   ExtractComponentProps<Overrides[Key]>,\r\n//   ExtractInternalProps<Overrides[Key]>\r\n// > {\r\n//   if (overrides === undefined) {\r\n//     return { Component: undefined, style, props };\r\n//   }\r\n\r\n//   const o = overrides[key];\r\n\r\n//   if (o === undefined) {\r\n//     return { Component: undefined, style, props };\r\n//   }\r\n\r\n//   if (o.Component !== undefined) {\r\n//     const Component = o.Component;\r\n//     return { Component };\r\n//   }\r\n\r\n//   const oStyle = o.style;\r\n//   if (oStyle !== undefined) {\r\n//     const o2Style = oStyle;\r\n//     if (typeof o2Style === 'function') {\r\n//       const o3Style = o2Style;\r\n//       //TODO\r\n//     } else {\r\n//       return {\r\n//         Component: undefined,\r\n//         style: { ...style, ...o2Style },\r\n//         props: { ...props, ...o.props },\r\n//       };\r\n//     }\r\n//   }\r\n\r\n//   return { Component: undefined, style, props };\r\n// }\r\n\r\n// export function getOverride<Key extends keyof Overrides>(\r\n//   key: Key,\r\n//   overrides: Overrides | undefined,\r\n//   defaultSpec: OverridableComponentProps<\r\n//     ExtractComponentProps<Overrides[Key]>,\r\n//     ExtractInternalProps<Overrides[Key]>,\r\n//     ExtractStyleProps<Overrides[Key]>\r\n//   >\r\n// ): OverridableComponentProps<\r\n//   ExtractComponentProps<Overrides[Key]>,\r\n//   ExtractInternalProps<Overrides[Key]>,\r\n//   ExtractStyleProps<Overrides[Key]>\r\n// > {\r\n//   type ComponentProps = ExtractComponentProps<Overrides[Key]>;\r\n\r\n//   if (overrides === undefined || overrides[key] === undefined) {\r\n//     return {\r\n//       Component: undefined,\r\n//       style: defaultSpec.style,\r\n//       internalProps: defaultSpec.internalProps,\r\n//     };\r\n//   }\r\n\r\n//   const o = overrides[key];\r\n\r\n//   if (o.Component !== undefined) {\r\n//     return { Component: o.Component };\r\n//   }\r\n\r\n//   return {\r\n//     Component: undefined,\r\n//     style: { ...defaultSpec.style, ...o.style },\r\n//     internalProps: { ...defaultSpec.internalProps, ...o.internalProps },\r\n//   };\r\n// }\r\n\r\nexport function getToolBarOverride(\r\n  overrides: Overrides | undefined,\r\n  defaultSpec: typeof DefaultToolBar\r\n): ResolvedOverride<ToolBarProps, {}> {\r\n  const o = overrides ? overrides.ToolBar : undefined;\r\n  return getOverride(o, defaultSpec, {});\r\n}\r\n\r\nexport function getToolBarButtonOverride(\r\n  overrides: Overrides | undefined,\r\n  defaultSpec: typeof DefaultToolBarButton\r\n): ResolvedOverride<ToolBarButtonProps, {}> {\r\n  const o = overrides ? overrides.ToolBarButton : undefined;\r\n  return getOverride(o, defaultSpec, {});\r\n}\r\n\r\nexport function getWeekdaysOverride(\r\n  overrides: Overrides | undefined,\r\n  defaultSpec: typeof DefaultWeekdays\r\n): ResolvedOverride<{}, {}> {\r\n  const o = overrides ? overrides.Weekdays : undefined;\r\n  return getOverride(o, defaultSpec, {});\r\n}\r\n\r\nexport function getWeekdayOverride(\r\n  overrides: Overrides | undefined,\r\n  defaultSpec: typeof DefaultWeekday\r\n): ResolvedOverride<{ weekday: string }, {}> {\r\n  const o = overrides ? overrides.Weekday : undefined;\r\n  return getOverride(o, defaultSpec, {});\r\n}\r\n\r\nexport function getDayCellsOverride(\r\n  overrides: Overrides | undefined,\r\n  defaultSpec: typeof DefaultDayCells\r\n): ResolvedOverride<DayCellsProps, {}> {\r\n  const o = overrides ? overrides.DayCells : undefined;\r\n  return getOverride(o, defaultSpec, {});\r\n}\r\n\r\nexport function getDayCellOverride(\r\n  overrides: Overrides | undefined,\r\n  defaultSpec: typeof DefaultDayCell,\r\n  styleProps?: ExtractStyleProps<typeof DefaultDayCell>\r\n): ResolvedOverride<DayCellProps, {}> {\r\n  const o = overrides ? overrides.DayCell : undefined;\r\n  return getOverride(o, defaultSpec, styleProps);\r\n}\r\n\r\nexport function getAvailsOverride(\r\n  overrides: Overrides | undefined,\r\n  defaultSpec: typeof DefaultAvailabiliies\r\n): ResolvedOverride<AvailSlotsProps, {}> {\r\n  const o = overrides ? overrides.Availabilities : undefined;\r\n  return getOverride(o, defaultSpec, {});\r\n}\r\n\r\nexport function getAvailOverride(\r\n  overrides: Overrides | undefined,\r\n  defaultSpec: typeof DefaultAvailSlot,\r\n  styleProps?: ExtractStyleProps<typeof DefaultAvailSlot>\r\n): ResolvedOverride<AvailSlotProps, {}> {\r\n  const o = overrides ? overrides.AvailSlot : undefined;\r\n  return getOverride(o, defaultSpec, styleProps);\r\n}\r\n","import React from 'react';\r\nimport { Navigate, ToolBarProps, CalendarTheme } from './types';\r\nimport { useCalendarContext } from './calendar-context';\r\nimport {\r\n  Overrides,\r\n  getToolBarOverride,\r\n  getToolBarButtonOverride,\r\n} from './overrides';\r\n\r\nconst navigate: Navigate = {\r\n  PREVIOUS: 'PREV',\r\n  NEXT: 'NEXT',\r\n  TODAY: 'TODAY',\r\n  DATE: 'DATE',\r\n};\r\n\r\nexport const Toolbar = ({\r\n  localizer: { messages },\r\n  label,\r\n  onNavigate,\r\n  overrides,\r\n}: ToolBarProps & { overrides?: Overrides }) => {\r\n  const { theme } = useCalendarContext();\r\n\r\n  const { Root, style, className } = getToolBarOverride(overrides, {\r\n    style: theme.toolBarStyle,\r\n    className: theme.toolBarButtonsContainerClass,\r\n  });\r\n\r\n  if (Root) {\r\n    return <Root {...{ localizer: { messages }, label, onNavigate }} />;\r\n  }\r\n\r\n  return (\r\n    <div style={style} className={className} role=\"group\">\r\n      <ToolbarButton\r\n        theme={theme}\r\n        overrides={overrides}\r\n        onClick={() => onNavigate(navigate.TODAY)}\r\n        message={messages.today}\r\n      />\r\n\r\n      <ToolbarButton\r\n        theme={theme}\r\n        overrides={overrides}\r\n        onClick={() => onNavigate(navigate.PREVIOUS)}\r\n        message={messages.previous}\r\n      />\r\n\r\n      <ToolbarButton\r\n        theme={theme}\r\n        overrides={overrides}\r\n        onClick={() => onNavigate(navigate.NEXT)}\r\n        message={messages.next}\r\n      />\r\n\r\n      <button\r\n        disabled\r\n        className={theme.toolBarLabelClass}\r\n        style={{ width: 110 }}\r\n      >\r\n        <span>{label}</span>\r\n      </button>\r\n    </div>\r\n  );\r\n};\r\n\r\nfunction ToolbarButton({\r\n  message,\r\n  onClick,\r\n  overrides,\r\n  theme,\r\n}: { theme: CalendarTheme; message: string; onClick: () => void } & {\r\n  overrides?: Overrides;\r\n}) {\r\n  const { Root, style, internalProps, className } = getToolBarButtonOverride(\r\n    overrides,\r\n    {\r\n      className: theme.toolBarButtonClass,\r\n    }\r\n  );\r\n\r\n  if (Root !== undefined) {\r\n    return <Root message={message} onClicked={onClick} />;\r\n  }\r\n\r\n  return (\r\n    <button\r\n      className={className}\r\n      onClick={onClick}\r\n      style={style}\r\n      {...internalProps}\r\n    >\r\n      {message}\r\n    </button>\r\n  );\r\n}\r\n","import React from 'react';\r\nimport {\r\n  Overrides,\r\n  getWeekdaysOverride,\r\n  getWeekdayOverride,\r\n} from './overrides';\r\n\r\nconst weekdays = ['S', 'M', 'T', 'W', 'Th', 'F', 'Sa'];\r\n\r\nexport const Weekdays = ({ overrides }: { overrides?: Overrides }) => {\r\n  const { Root, style } = getWeekdaysOverride(overrides, {\r\n    style: {\r\n      display: 'flex',\r\n      justifyContent: 'flex-start',\r\n      flexWrap: 'nowrap',\r\n      flexDirection: 'row',\r\n    },\r\n  });\r\n\r\n  if (Root) {\r\n    return <Root />;\r\n  }\r\n\r\n  const {\r\n    Root: RootWeekday,\r\n    className: classNameWeekday,\r\n    style: styleWeekday,\r\n  } = getWeekdayOverride(overrides, {\r\n    className: 'border border-default',\r\n    style: {\r\n      width: 50,\r\n      height: 50,\r\n      marginBottom: 10,\r\n      display: 'flex',\r\n      justifyContent: 'center',\r\n      alignItems: 'center',\r\n    },\r\n  });\r\n\r\n  return (\r\n    <div style={style}>\r\n      {weekdays.map(weekday =>\r\n        RootWeekday ? (\r\n          <RootWeekday weekday={weekday} />\r\n        ) : (\r\n          <div className={classNameWeekday} key={weekday} style={styleWeekday}>\r\n            {weekday}\r\n          </div>\r\n        )\r\n      )}\r\n    </div>\r\n  );\r\n};\r\n","import React from 'react';\r\nimport { AvailSlotProps } from './types';\r\nimport { Overrides, getAvailOverride } from './overrides';\r\n\r\nexport function AvailSlot({\r\n  theme,\r\n  onAvailabilitySelected,\r\n  s,\r\n  formatAsDateJustTime,\r\n  overrides,\r\n}: AvailSlotProps & { overrides?: Overrides }) {\r\n  const { Root, className, style } = getAvailOverride(\r\n    overrides,\r\n    {\r\n      className: theme.slotButtonClass,\r\n      style: { minWidth: 200 },\r\n    },\r\n    { date: s.startDate }\r\n  );\r\n\r\n  if (Root) {\r\n    return (\r\n      <Root\r\n        {...{\r\n          theme,\r\n          onAvailabilitySelected,\r\n          s,\r\n          formatAsDateJustTime,\r\n        }}\r\n      />\r\n    );\r\n  }\r\n\r\n  return (\r\n    <div style={{ marginBottom: 10 }}>\r\n      <button\r\n        className={className}\r\n        disabled={false}\r\n        // variant=\"contained\"\r\n        style={style}\r\n        onClick={() =>\r\n          onAvailabilitySelected({\r\n            startDate: new Date(s.startDate),\r\n            endDate: new Date(s.endDate),\r\n          })\r\n        }\r\n      >\r\n        {formatAsDateJustTime(new Date(s.startDate))}\r\n      </button>\r\n    </div>\r\n  );\r\n}\r\n","import React, { useMemo } from 'react';\r\nimport {\r\n  AvailSlotsProps,\r\n  Booking,\r\n  AvailabilityEvent,\r\n  CalendarTheme,\r\n} from './types';\r\nimport { createUtils } from './utils';\r\nimport { AvailSlot } from './AvailSlot';\r\nimport { Overrides, getAvailsOverride } from './overrides';\r\n\r\nexport const AvailSlots: React.SFC<AvailSlotsProps & {\r\n  overrides?: Overrides;\r\n}> = ({\r\n  viewingDayAvailabilities,\r\n  handleUnselect,\r\n  onAvailabilitySelected,\r\n  show,\r\n  slotStepMs,\r\n  slotLengthMs,\r\n  utils,\r\n  theme,\r\n  overrides,\r\n}) => {\r\n  const { Root, style } = getAvailsOverride(overrides, {\r\n    style: show ? theme.slotsContainerStyleShow : theme.slotsContainerStyleHide,\r\n  });\r\n\r\n  if (Root) {\r\n    return (\r\n      <Root\r\n        {...{\r\n          viewingDayAvailabilities,\r\n          handleUnselect,\r\n          onAvailabilitySelected,\r\n          show,\r\n          slotStepMs,\r\n          slotLengthMs,\r\n          utils,\r\n          theme,\r\n        }}\r\n      />\r\n    );\r\n  }\r\n\r\n  return (\r\n    <div style={style}>\r\n      {show && (\r\n        <div className=\"mt-2 mr-1\">\r\n          <button\r\n            type=\"button\"\r\n            className={theme.slotContainerCloseClass}\r\n            aria-label=\"Close\"\r\n            style={{ outline: 'none' }}\r\n            onClick={handleUnselect}\r\n          >\r\n            <span aria-hidden=\"true\">&times;</span>\r\n          </button>\r\n          <AddBookingFromAvailabilitySlots\r\n            theme={theme}\r\n            durationMinutes={60}\r\n            avails={viewingDayAvailabilities}\r\n            onAvailabilitySelected={onAvailabilitySelected}\r\n            slotLengthMs={slotLengthMs}\r\n            slotStepMs={slotStepMs}\r\n            utils={utils}\r\n            overrides={overrides}\r\n          />\r\n          {viewingDayAvailabilities.length > 7 && (\r\n            <button\r\n              type=\"button\"\r\n              className={theme.slotContainerCloseClass}\r\n              aria-label=\"Close\"\r\n              style={{ outline: 'none' }}\r\n              onClick={handleUnselect}\r\n            >\r\n              <span aria-hidden=\"true\">&times;</span>\r\n            </button>\r\n          )}\r\n        </div>\r\n      )}\r\n    </div>\r\n  );\r\n};\r\n\r\nexport const AddBookingFromAvailabilitySlots = ({\r\n  avails,\r\n  slotLengthMs,\r\n  slotStepMs,\r\n  onAvailabilitySelected,\r\n  theme,\r\n  utils,\r\n  overrides,\r\n}: {\r\n  avails: Booking[];\r\n  theme: CalendarTheme;\r\n  durationMinutes: number;\r\n  slotLengthMs?: number;\r\n  slotStepMs?: number;\r\n  onAvailabilitySelected: (e: AvailabilityEvent) => any;\r\n  utils: ReturnType<typeof createUtils>;\r\n} & { overrides?: Overrides }) => {\r\n  const { chunkify, msInHour, formatAsDate, formatAsDateJustTime } = utils;\r\n  const slots = useMemo(\r\n    () =>\r\n      chunkify(\r\n        avails.map(a => ({\r\n          startDate: a.startDate,\r\n          endDate: a.endDate,\r\n        })),\r\n        slotLengthMs || 1 * msInHour,\r\n        slotStepMs || 0.5 * msInHour\r\n      ),\r\n    [avails, msInHour, chunkify, slotLengthMs, slotStepMs]\r\n  );\r\n\r\n  return (\r\n    <div>\r\n      <h4>{theme.requestAppointmentLabel}</h4>\r\n      <h5>\r\n        {avails && avails.length > 0 ? formatAsDate(avails[0].startDate) : ''}\r\n      </h5>\r\n      {slots.map((s, i) => (\r\n        <AvailSlot\r\n          key={'b_' + i}\r\n          {...{\r\n            theme,\r\n            onAvailabilitySelected,\r\n            s,\r\n            formatAsDateJustTime,\r\n            overrides,\r\n          }}\r\n        />\r\n      ))}\r\n    </div>\r\n  );\r\n};\r\n","import React from 'react';\r\nimport { DayCellProps } from './types';\r\nimport { Overrides, getDayCellOverride } from './overrides';\r\n\r\nexport const DayCell = ({\r\n  date,\r\n  shouldDisplay,\r\n  dayIndexInWeek,\r\n  weekIndexInCalRange,\r\n  availsByIndex,\r\n  selectedDate,\r\n  handleSelected,\r\n  moment,\r\n  utils,\r\n  theme,\r\n  overrides,\r\n}: DayCellProps & { overrides?: Overrides }) => {\r\n  const dayIndexInCalRange = weekIndexInCalRange * 7 + dayIndexInWeek;\r\n\r\n  const isSelected = !!selectedDate && utils.datesEqual(date, selectedDate);\r\n  const hasAvail = availsByIndex[dayIndexInCalRange].hasAvail;\r\n\r\n  const { Root, style, className } = getDayCellOverride(\r\n    overrides,\r\n    {\r\n      className:\r\n        theme.dayClassBase +\r\n        ' ' +\r\n        (selectedDate && utils.datesEqual(date, selectedDate)\r\n          ? theme.dayClassSelected\r\n          : availsByIndex[dayIndexInCalRange].hasAvail\r\n          ? theme.dayClassHasAvailability\r\n          : theme.dayClassDefault),\r\n      style: {\r\n        cursor: 'pointer',\r\n        border:\r\n          selectedDate && utils.datesEqual(date, selectedDate)\r\n            ? '4px solid'\r\n            : availsByIndex[dayIndexInCalRange].hasAvail\r\n            ? '3px solid'\r\n            : '',\r\n        height: 50,\r\n        width: 50,\r\n        display: 'flex',\r\n        justifyContent: 'center',\r\n        alignItems: 'center',\r\n      },\r\n    },\r\n    { date, isSelected, hasAvail }\r\n  );\r\n\r\n  if (Root) {\r\n    return (\r\n      <Root\r\n        {...{\r\n          shouldDisplay,\r\n          date,\r\n          dayIndexInWeek,\r\n          weekIndexInCalRange,\r\n          availsByIndex,\r\n          selectedDate,\r\n          handleSelected,\r\n          moment,\r\n          utils,\r\n          theme,\r\n        }}\r\n      />\r\n    );\r\n  }\r\n\r\n  const styleWithHiden = shouldDisplay\r\n    ? style\r\n    : { ...style, visibility: 'hidden' as 'hidden' };\r\n\r\n  return (\r\n    <div\r\n      className={className}\r\n      style={styleWithHiden}\r\n      onClick={() => handleSelected(date)}\r\n    >\r\n      {moment(date).format('D')}\r\n    </div>\r\n  );\r\n};\r\n","import React from 'react';\r\nimport { DayCellsProps } from './types';\r\nimport { DayCell } from './DayCell';\r\nimport { Overrides, getDayCellsOverride } from './overrides';\r\n\r\nexport function DayCells({\r\n  week,\r\n  date,\r\n  selectedDate,\r\n  weekIndexInCalRange,\r\n  handleSelected,\r\n  availsByIndex,\r\n  moment,\r\n  utils,\r\n  theme,\r\n  overrides,\r\n}: DayCellsProps & { overrides?: Overrides }) {\r\n  const { Root, style } = getDayCellsOverride(overrides, {\r\n    style: {\r\n      display: 'flex',\r\n      justifyContent: 'flex-start',\r\n      flexWrap: 'nowrap',\r\n      flexDirection: 'row',\r\n    },\r\n  });\r\n\r\n  if (Root) {\r\n    return (\r\n      <Root\r\n        {...{\r\n          date,\r\n          week,\r\n          selectedDate,\r\n          weekIndexInCalRange,\r\n          handleSelected,\r\n          availsByIndex,\r\n          moment,\r\n          utils,\r\n          theme,\r\n        }}\r\n      />\r\n    );\r\n  }\r\n\r\n  return (\r\n    <div style={style}>\r\n      {week.map((d, j) => (\r\n        <DayCell\r\n          key={'d_' + j}\r\n          {...{\r\n            shouldDisplay: utils.sameMonth(d, date),\r\n            date: d,\r\n            selectedDate,\r\n            weekIndexInCalRange,\r\n            dayIndexInWeek: j,\r\n            handleSelected,\r\n            availsByIndex,\r\n            moment,\r\n            utils,\r\n            theme,\r\n            overrides,\r\n          }}\r\n        />\r\n      ))}\r\n    </div>\r\n  );\r\n}\r\n","import React, { useState, useMemo, useEffect } from 'react';\r\n\r\nimport { Weekdays } from './Weekdays';\r\nimport { MonthlyAvailabilityCalendarProps } from './types';\r\n\r\nimport { AvailSlots } from './AvailSlots';\r\nimport { DayCells } from './DayCells';\r\nimport { useCalendarContext } from './calendar-context';\r\nimport { Overrides } from './overrides';\r\n\r\nexport const MonthlyAvailabilityCalendar = ({\r\n  availabilities,\r\n  onAvailabilitySelected,\r\n  onDaySelected,\r\n  slotLengthMs,\r\n  slotStepMs,\r\n  date,\r\n  style,\r\n  overrides,\r\n}: MonthlyAvailabilityCalendarProps & { overrides?: Overrides }) => {\r\n  const { moment, theme, utils } = useCalendarContext();\r\n\r\n  const [selectedDate, setSelectedDate] = useState<Date | null>(null);\r\n\r\n  useEffect(() => {\r\n    setSelectedDate(null);\r\n    onDaySelected && onDaySelected(null);\r\n  }, [date]);\r\n\r\n  const handleSelected = (date: Date) => {\r\n    if (selectedDate && utils.datesEqual(date, selectedDate)) {\r\n      setSelectedDate(null);\r\n      onDaySelected && onDaySelected(null);\r\n    } else {\r\n      setSelectedDate(date);\r\n      onDaySelected && onDaySelected(date);\r\n    }\r\n  };\r\n\r\n  const handleUnselect = () => {\r\n    onDaySelected && onDaySelected(null);\r\n    setSelectedDate(null);\r\n  };\r\n\r\n  const { days, weeks } = useMemo(() => utils.monthDaysForDate(date), [\r\n    date,\r\n    utils,\r\n  ]);\r\n\r\n  const availsByIndex = useMemo(\r\n    () => utils.availByIndex(days, availabilities),\r\n    [days, availabilities, utils]\r\n  );\r\n\r\n  const viewingDayAvailabilities = useMemo(() => {\r\n    if (selectedDate !== null) {\r\n      return (availabilities || []).filter(({ startDate }) =>\r\n        utils.datesEqual(startDate, selectedDate)\r\n      );\r\n    } else {\r\n      return [];\r\n    }\r\n  }, [selectedDate, availabilities, utils]);\r\n\r\n  return (\r\n    <div style={{ minHeight: 368, ...style }}>\r\n      {/* render weekdays header */}\r\n      <Weekdays overrides={overrides} />\r\n\r\n      {/* render each week in cal range */}\r\n      {weeks.map((w, i) => {\r\n        const hideWeek = utils.shouldHideWeek(\r\n          selectedDate,\r\n          w,\r\n          viewingDayAvailabilities\r\n        );\r\n        return hideWeek ? null : (\r\n          <React.Fragment key={'w_' + i}>\r\n            <DayCells\r\n              {...{\r\n                date,\r\n                week: w,\r\n                selectedDate,\r\n                weekIndexInCalRange: i,\r\n                handleSelected,\r\n                availsByIndex,\r\n                moment,\r\n                utils,\r\n                theme,\r\n                overrides,\r\n              }}\r\n            />\r\n          </React.Fragment>\r\n        );\r\n      })}\r\n\r\n      <AvailSlots\r\n        {...{\r\n          show: !!selectedDate && viewingDayAvailabilities.length > 0,\r\n          onAvailabilitySelected,\r\n          viewingDayAvailabilities,\r\n          handleUnselect,\r\n          slotLengthMs,\r\n          slotStepMs,\r\n          utils,\r\n          theme,\r\n          overrides,\r\n        }}\r\n      />\r\n    </div>\r\n  );\r\n};\r\n","import React, { useState, useMemo, useEffect, useRef } from 'react';\r\n\r\n// import { stringOrDate, NavigateAction, View } from \"react-big-calendar\";\r\n\r\nimport { Toolbar } from './Toolbar';\r\n\r\nimport {\r\n  NavigateAction,\r\n  AvailabilityCalendarProps,\r\n  Range,\r\n  defaultTheme,\r\n} from './types';\r\n\r\nimport { MonthlyAvailabilityCalendar } from './MonthlyAvailabilityCalendar';\r\nimport {\r\n  useCalendarContext,\r\n  CalendarContextProvider,\r\n} from './calendar-context';\r\nimport { Overrides } from './overrides';\r\n\r\nconst AvailabilityCalendarComp = ({\r\n  initialDate,\r\n  onAvailabilitySelected,\r\n  onDaySelected,\r\n  blockOutPeriods,\r\n  providerTimeZone,\r\n  bookings,\r\n  avails,\r\n  onCalRangeChange,\r\n  slotLengthMs,\r\n  slotStepMs,\r\n  overrides,\r\n}: Omit<Omit<AvailabilityCalendarProps, 'moment'>, 'theme'> & {\r\n  overrides?: Overrides;\r\n}) => {\r\n  const { moment, utils } = useCalendarContext();\r\n\r\n  const [now] = useState<Date>(initialDate || new Date());\r\n  const [calRange, setCalRange] = useState<Range>(utils.monthRangeForDate(now));\r\n  const [date, setDate] = useState<Date>(now);\r\n\r\n  const lastCalRange = useRef<Range | null>(null);\r\n\r\n  useEffect(() => {\r\n    if (lastCalRange.current !== calRange) {\r\n      onCalRangeChange && onCalRangeChange(calRange);\r\n      lastCalRange.current = calRange;\r\n    }\r\n  }, [calRange, onCalRangeChange]);\r\n\r\n  const availabilities = useMemo<{ startDate: Date; endDate: Date }[]>(() => {\r\n    if (avails) return avails;\r\n\r\n    const startAndEnd = utils.toStartAndEnd(calRange);\r\n    return utils.availabilitiesFromBookings(\r\n      blockOutPeriods || [],\r\n      providerTimeZone,\r\n      bookings,\r\n      new Date() /*now*/,\r\n      startAndEnd.startDate,\r\n      startAndEnd.endDate\r\n    );\r\n  }, [\r\n    avails,\r\n    bookings,\r\n    providerTimeZone,\r\n    calRange,\r\n    now,\r\n    blockOutPeriods,\r\n    utils,\r\n  ]);\r\n\r\n  const handleOnNavigate = (navigate: NavigateAction) => {\r\n    if (navigate === 'TODAY') {\r\n      const today = new Date();\r\n\r\n      setDate(today);\r\n      setCalRange(utils.monthRangeForDate(today));\r\n\r\n      return;\r\n    }\r\n\r\n    if (navigate !== 'NEXT' && navigate !== 'PREV') {\r\n      return;\r\n    }\r\n\r\n    const newDate = moment(date)\r\n      .add(navigate === 'NEXT' ? 1 : -1, 'month')\r\n      .toDate();\r\n\r\n    setDate(newDate);\r\n    setCalRange(utils.monthRangeForDate(newDate));\r\n  };\r\n\r\n  return (\r\n    <div>\r\n      <Toolbar\r\n        onNavigate={handleOnNavigate}\r\n        label={utils.formatAsMonth(date)}\r\n        localizer={{\r\n          messages: { today: 'Today', previous: 'Previous', next: 'Next' },\r\n        }}\r\n        overrides={overrides}\r\n      />\r\n      <MonthlyAvailabilityCalendar\r\n        availabilities={availabilities}\r\n        date={date}\r\n        onAvailabilitySelected={onAvailabilitySelected}\r\n        onDaySelected={onDaySelected}\r\n        slotLengthMs={slotLengthMs}\r\n        slotStepMs={slotStepMs}\r\n        overrides={overrides}\r\n      />\r\n    </div>\r\n  );\r\n};\r\n\r\nexport const AvailabilityCalendar = ({\r\n  moment,\r\n  theme,\r\n  ...props\r\n}: AvailabilityCalendarProps & { overrides?: Overrides }) => {\r\n  return (\r\n    <CalendarContextProvider\r\n      moment={moment}\r\n      theme={theme ? { ...defaultTheme, ...theme } : defaultTheme}\r\n    >\r\n      <AvailabilityCalendarComp {...props} />\r\n    </CalendarContextProvider>\r\n  );\r\n};\r\n","import React, { useMemo, useState } from 'react';\r\n\r\nimport {\r\n  AvailabilityCalendar,\r\n  AvailabilityEvent,\r\n  MsSinceMidnightRange,\r\n  Booking,\r\n  Range,\r\n  defaultComponents,\r\n} from 'react-availability-calendar';\r\nimport moment from 'moment';\r\n\r\nimport 'bootstrap/dist/css/bootstrap.min.css';\r\nimport './custom.scss';\r\nimport { Overrides } from 'react-availability-calendar/dist/overrides';\r\n\r\nconst msInHour = 60 * 60 * 1000;\r\n\r\n// aka DayMode - which part of the day to display time slots for\r\ntype CalMode = 'allDay' | 'morning' | 'evening' | 'noon';\r\n\r\nconst App: React.FC = () => {\r\n  const [selectedAvails, setSelectedAvails] = useState<{\r\n    [key: number]: AvailabilityEvent | null;\r\n  }>({});\r\n\r\n  // for optional custom toolbar\r\n  const [showCustomToolBar, setShowCustomToolBar] = useState(false);\r\n  const [timeOfDayMode, setTimeOfDayMode] = useState<CalMode>('evening');\r\n  const [lastSelectedDay, setLastSelectedDay] = useState<Date>(new Date());\r\n  const [calVersion, setCalVersion] = useState(1);\r\n\r\n  const onAvailabilitySelected = (a: AvailabilityEvent) => {\r\n    console.log('Availability slot selected!: ', a);\r\n    const startMs = a.startDate.getTime();\r\n    const wasSelected = !!selectedAvails[startMs];\r\n    setSelectedAvails((selectedAvails) => ({\r\n      ...selectedAvails,\r\n      [startMs]: wasSelected ? null : a,\r\n    }));\r\n  };\r\n  // for optional custom toolbar\r\n  const onDaySelected = (day: Date | null) => {\r\n    setShowCustomToolBar(!!day);\r\n\r\n    // to restore the next time calVersion upates\r\n    if (day) {\r\n      setLastSelectedDay(day);\r\n    }\r\n  };\r\n  const handleCloseToolBar = () => {\r\n    setShowCustomToolBar(false);\r\n\r\n    // remount calendar to close the day view\r\n    //(we're using version as \"key\" below)\r\n    setCalVersion((version) => version + 1);\r\n  };\r\n\r\n  const onChangedCalRange = (r: Range) =>\r\n    console.log('Calendar range selected (fetch bookings here): ', r);\r\n\r\n  const providerTimeZoneForBlockOutHours = 'America/New_York';\r\n  // const blockOutPeriods: MsSinceMidnightRange[] = [\r\n  //   [0 * msInHour, 9 * msInHour],\r\n  //   [19 * msInHour, 24 * msInHour],\r\n  // ];\r\n  const blockOutPeriods = blockOutsForCalMode(timeOfDayMode);\r\n\r\n  const bookings: Booking[] = [\r\n    {\r\n      startDate: new Date(2020, 2, 1, 19),\r\n      endDate: new Date(2020, 2, 1, 20),\r\n    },\r\n    {\r\n      startDate: new Date(2020, 2, 1, 16, 30),\r\n      endDate: new Date(2020, 2, 1, 17),\r\n    },\r\n  ];\r\n\r\n  // Optional overrides to tweak appearance of various components\r\n  const overrides = useMemo<Overrides>(\r\n    () => ({\r\n      ...defaultComponents,\r\n      // ToolBar: { Root: (p: any) => <div>{JSON.stringify(p)}</div> },\r\n      ToolBar: {\r\n        className: 'border btn-group',\r\n        style: { minHeight: undefined },\r\n      },\r\n      ToolBarButton: {\r\n        className: 'btn btn-outline-info',\r\n        style: { outline: 'none' },\r\n      },\r\n      AvailSlot: {\r\n        className: (p) =>\r\n          selectedAvails[p.date.getTime()]\r\n            ? 'btn btn-secondary'\r\n            : 'btn btn-primary',\r\n      },\r\n      Weekday: {\r\n        style: {\r\n          borderWidth: 0,\r\n          borderStyle: 'solid',\r\n          borderBottomWidth: 1,\r\n          borderRightWidth: 1,\r\n          borderColor: '#dddddd',\r\n        },\r\n        className: 'none',\r\n      },\r\n      DayCell: {\r\n        style: (p) =>\r\n          p.isSelected\r\n            ? { transition: 'width 200ms, height 200ms', height: 60, width: 60 }\r\n            : { transition: 'width 200ms, height 200ms' },\r\n        className: (p) => {\r\n          const wasSelected = p.date.getTime() === lastSelectedDay.getTime();\r\n          const additionalClassForWasSelected = wasSelected\r\n            ? ' font-weight-bold'\r\n            : '';\r\n          return (\r\n            (p.isSelected\r\n              ? 'rounded-circle border-success'\r\n              : p.hasAvail\r\n              ? 'rounded-circle border-primary'\r\n              : 'rounded-circle border-secondary') +\r\n            additionalClassForWasSelected\r\n          );\r\n        },\r\n      },\r\n    }),\r\n    [selectedAvails, lastSelectedDay]\r\n  );\r\n\r\n  return (\r\n    <div\r\n      style={{\r\n        position: 'relative',\r\n      }}\r\n    >\r\n      <div>\r\n        <a href=\"https://github.com/nyura123/react-availability-calendar/tree/master/examples/example1\">\r\n          Code\r\n        </a>\r\n      </div>\r\n      <div style={{ maxWidth: 350, maxHeight: 520, overflowY: 'auto' }}>\r\n        <AvailabilityCalendar\r\n          key={'cal_v' + calVersion}\r\n          bookings={bookings}\r\n          providerTimeZone={providerTimeZoneForBlockOutHours}\r\n          moment={moment}\r\n          initialDate={lastSelectedDay}\r\n          onAvailabilitySelected={onAvailabilitySelected}\r\n          onDaySelected={onDaySelected}\r\n          onCalRangeChange={onChangedCalRange}\r\n          blockOutPeriods={blockOutPeriods}\r\n          overrides={overrides}\r\n        />\r\n      </div>\r\n      <div\r\n        className=\"shadow\"\r\n        style={{\r\n          width: '100%',\r\n          maxWidth: 350,\r\n          backgroundColor: 'rgba(200, 200, 200, 1)',\r\n          ...(showCustomToolBar ? styleShow : styleHide),\r\n          top: 0,\r\n          left: 0,\r\n        }}\r\n      >\r\n        <CalModeToolbar calMode={timeOfDayMode} setCalMode={setTimeOfDayMode} />\r\n        <button\r\n          className=\"btn btn-sm btn-outline-secondary\"\r\n          onClick={handleCloseToolBar}\r\n        >\r\n          Close\r\n        </button>\r\n        {lastSelectedDay && (\r\n          <div\r\n            className=\"text-primary\"\r\n            style={{ float: 'right', paddingRight: 50 }}\r\n          >\r\n            <small>Selected:</small> {moment(lastSelectedDay).format('ddd, ll')}\r\n          </div>\r\n        )}\r\n      </div>\r\n    </div>\r\n  );\r\n};\r\n\r\n// Optional example custom tool bar\r\n\r\nconst CalModeToolbar = ({\r\n  calMode,\r\n  setCalMode,\r\n}: {\r\n  calMode: CalMode;\r\n  setCalMode: (c: CalMode) => any;\r\n}) => (\r\n  <div className=\"m-1 btn-group\">\r\n    <CalModeButton\r\n      label=\"Morning\"\r\n      calModeTarget=\"morning\"\r\n      {...{ setCalMode, calMode }}\r\n    />\r\n    <CalModeButton\r\n      label=\"Noon\"\r\n      calModeTarget=\"noon\"\r\n      {...{ setCalMode, calMode }}\r\n    />\r\n    <CalModeButton\r\n      label=\"Evening\"\r\n      calModeTarget=\"evening\"\r\n      {...{ setCalMode, calMode }}\r\n    />\r\n    <CalModeButton\r\n      label=\"All Day\"\r\n      calModeTarget=\"allDay\"\r\n      {...{ setCalMode, calMode }}\r\n    />\r\n  </div>\r\n);\r\n\r\nconst CalModeButton = ({\r\n  calMode,\r\n  setCalMode,\r\n  calModeTarget,\r\n  label,\r\n}: {\r\n  calMode: CalMode;\r\n  setCalMode: (c: CalMode) => any;\r\n  calModeTarget: CalMode;\r\n  label: string;\r\n}) => (\r\n  <button\r\n    onClick={() => setCalMode(calModeTarget)}\r\n    className={calModeBtnStyle(calMode, calModeTarget)}\r\n  >\r\n    {label}\r\n  </button>\r\n);\r\n\r\nconst styleShow = {\r\n  position: 'absolute' as 'absolute',\r\n  transition: 'transform 300ms',\r\n  transform: 'scale(1)',\r\n};\r\nconst styleHide = {\r\n  position: 'absolute' as 'absolute',\r\n  transition: 'transform 300ms',\r\n  transform: 'scale(0)',\r\n};\r\n\r\nconst calModeBtnStyle = (calModeSelected: CalMode, calModeTarget: CalMode) =>\r\n  calModeSelected === calModeTarget\r\n    ? 'btn btn-sm btn-primary'\r\n    : 'btn btn-sm btn-default';\r\n\r\nconst blockOutAllDay: MsSinceMidnightRange[] = [];\r\n\r\nconst blockOutMorning: MsSinceMidnightRange[] = [\r\n  [0 * msInHour, 5 * msInHour],\r\n  [12 * msInHour, 24 * msInHour],\r\n];\r\n\r\nconst blockOutNoon: MsSinceMidnightRange[] = [\r\n  [0 * msInHour, 12 * msInHour],\r\n  [17 * msInHour, 24 * msInHour],\r\n];\r\n\r\nconst blockOutEvening: MsSinceMidnightRange[] = [[0 * msInHour, 17 * msInHour]];\r\n\r\nfunction blockOutsForCalMode(calMode: CalMode): MsSinceMidnightRange[] {\r\n  switch (calMode) {\r\n    case 'allDay':\r\n      return blockOutAllDay;\r\n    case 'morning':\r\n      return blockOutMorning;\r\n    case 'noon':\r\n      return blockOutNoon;\r\n    case 'evening':\r\n      return blockOutEvening;\r\n\r\n      return 'unhandled calMode' as never;\r\n  }\r\n}\r\n\r\nexport default App;\r\n","// This optional code is used to register a service worker.\r\n// register() is not called by default.\r\n\r\n// This lets the app load faster on subsequent visits in production, and gives\r\n// it offline capabilities. However, it also means that developers (and users)\r\n// will only see deployed updates on subsequent visits to a page, after all the\r\n// existing tabs open on the page have been closed, since previously cached\r\n// resources are updated in the background.\r\n\r\n// To learn more about the benefits of this model and instructions on how to\r\n// opt-in, read https://bit.ly/CRA-PWA\r\n\r\nconst isLocalhost = Boolean(\r\n  window.location.hostname === 'localhost' ||\r\n    // [::1] is the IPv6 localhost address.\r\n    window.location.hostname === '[::1]' ||\r\n    // 127.0.0.1/8 is considered localhost for IPv4.\r\n    window.location.hostname.match(\r\n      /^127(?:\\.(?:25[0-5]|2[0-4][0-9]|[01]?[0-9][0-9]?)){3}$/\r\n    )\r\n);\r\n\r\ntype Config = {\r\n  onSuccess?: (registration: ServiceWorkerRegistration) => void;\r\n  onUpdate?: (registration: ServiceWorkerRegistration) => void;\r\n};\r\n\r\nexport function register(config?: Config) {\r\n  if (process.env.NODE_ENV === 'production' && 'serviceWorker' in navigator) {\r\n    // The URL constructor is available in all browsers that support SW.\r\n    const publicUrl = new URL(\r\n      (process as { env: { [key: string]: string } }).env.PUBLIC_URL,\r\n      window.location.href\r\n    );\r\n    if (publicUrl.origin !== window.location.origin) {\r\n      // Our service worker won't work if PUBLIC_URL is on a different origin\r\n      // from what our page is served on. This might happen if a CDN is used to\r\n      // serve assets; see https://github.com/facebook/create-react-app/issues/2374\r\n      return;\r\n    }\r\n\r\n    window.addEventListener('load', () => {\r\n      const swUrl = `${process.env.PUBLIC_URL}/service-worker.js`;\r\n\r\n      if (isLocalhost) {\r\n        // This is running on localhost. Let's check if a service worker still exists or not.\r\n        checkValidServiceWorker(swUrl, config);\r\n\r\n        // Add some additional logging to localhost, pointing developers to the\r\n        // service worker/PWA documentation.\r\n        navigator.serviceWorker.ready.then(() => {\r\n          console.log(\r\n            'This web app is being served cache-first by a service ' +\r\n              'worker. To learn more, visit https://bit.ly/CRA-PWA'\r\n          );\r\n        });\r\n      } else {\r\n        // Is not localhost. Just register service worker\r\n        registerValidSW(swUrl, config);\r\n      }\r\n    });\r\n  }\r\n}\r\n\r\nfunction registerValidSW(swUrl: string, config?: Config) {\r\n  navigator.serviceWorker\r\n    .register(swUrl)\r\n    .then(registration => {\r\n      registration.onupdatefound = () => {\r\n        const installingWorker = registration.installing;\r\n        if (installingWorker == null) {\r\n          return;\r\n        }\r\n        installingWorker.onstatechange = () => {\r\n          if (installingWorker.state === 'installed') {\r\n            if (navigator.serviceWorker.controller) {\r\n              // At this point, the updated precached content has been fetched,\r\n              // but the previous service worker will still serve the older\r\n              // content until all client tabs are closed.\r\n              console.log(\r\n                'New content is available and will be used when all ' +\r\n                  'tabs for this page are closed. See https://bit.ly/CRA-PWA.'\r\n              );\r\n\r\n              // Execute callback\r\n              if (config && config.onUpdate) {\r\n                config.onUpdate(registration);\r\n              }\r\n            } else {\r\n              // At this point, everything has been precached.\r\n              // It's the perfect time to display a\r\n              // \"Content is cached for offline use.\" message.\r\n              console.log('Content is cached for offline use.');\r\n\r\n              // Execute callback\r\n              if (config && config.onSuccess) {\r\n                config.onSuccess(registration);\r\n              }\r\n            }\r\n          }\r\n        };\r\n      };\r\n    })\r\n    .catch(error => {\r\n      console.error('Error during service worker registration:', error);\r\n    });\r\n}\r\n\r\nfunction checkValidServiceWorker(swUrl: string, config?: Config) {\r\n  // Check if the service worker can be found. If it can't reload the page.\r\n  fetch(swUrl)\r\n    .then(response => {\r\n      // Ensure service worker exists, and that we really are getting a JS file.\r\n      const contentType = response.headers.get('content-type');\r\n      if (\r\n        response.status === 404 ||\r\n        (contentType != null && contentType.indexOf('javascript') === -1)\r\n      ) {\r\n        // No service worker found. Probably a different app. Reload the page.\r\n        navigator.serviceWorker.ready.then(registration => {\r\n          registration.unregister().then(() => {\r\n            window.location.reload();\r\n          });\r\n        });\r\n      } else {\r\n        // Service worker found. Proceed as normal.\r\n        registerValidSW(swUrl, config);\r\n      }\r\n    })\r\n    .catch(() => {\r\n      console.log(\r\n        'No internet connection found. App is running in offline mode.'\r\n      );\r\n    });\r\n}\r\n\r\nexport function unregister() {\r\n  if ('serviceWorker' in navigator) {\r\n    navigator.serviceWorker.ready.then(registration => {\r\n      registration.unregister();\r\n    });\r\n  }\r\n}\r\n","import React from 'react';\r\nimport ReactDOM from 'react-dom';\r\nimport './index.css';\r\nimport App from './App';\r\nimport * as serviceWorker from './serviceWorker';\r\n\r\nReactDOM.render(<App />, document.getElementById('root'));\r\n\r\n// If you want your app to work offline and load faster, you can change\r\n// unregister() to register() below. Note this comes with some pitfalls.\r\n// Learn more about service workers: https://bit.ly/CRA-PWA\r\nserviceWorker.unregister();\r\n"],"sourceRoot":""}